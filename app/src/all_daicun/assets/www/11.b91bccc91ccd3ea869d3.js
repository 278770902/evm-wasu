(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"57in":function(n,e,l){"use strict";l.d(e,"a",function(){return r}),l.d(e,"b",function(){return p});var t=l("CcnG"),a=(l("xvo6"),l("Ip0R")),i=(l("gIcY"),l("PqVL")),u=l("prAe"),r=t["ɵcrt"]({encapsulation:0,styles:["[_nghost-%COMP%]{display:flex;height:100%}.inactive[_nghost-%COMP%], .success[_nghost-%COMP%]{display:none}.page-tip[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;color:rgba(0,0,0,.5)}.page-tip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40%}.page-tip[_ngcontent-%COMP%]   .am-button[_ngcontent-%COMP%]{margin-top:5px}"],data:{}});function o(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,2,"Icon",[],null,null,null,u.q,u.i)),t["ɵprd"](512,null,i.Oc,i.Oc,[]),t["ɵdid"](3,49152,null,0,i.bb,[i.Oc],{type:[0,"type"]},null)],function(n,e){n(e,3,0,"loading")},null)}function s(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,e){n(e,1,0,e.component.icon)})}function c(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,"div",[["Button",""]],null,[[null,"click"],[null,"touchstart"],[null,"mousedown"],[null,"touchend"],[null,"mouseup"],[null,"touchmove"],[null,"mousemove"],[null,"touchcancel"]],function(n,e,l){var a=!0,i=n.component;return"touchstart"===e&&(a=!1!==t["ɵnov"](n,1).touchStart(l)&&a),"mousedown"===e&&(a=!1!==t["ɵnov"](n,1).touchStart(l)&&a),"touchend"===e&&(a=!1!==t["ɵnov"](n,1).touchEnd(l)&&a),"mouseup"===e&&(a=!1!==t["ɵnov"](n,1).touchEnd(l)&&a),"touchmove"===e&&(a=!1!==t["ɵnov"](n,1).touchEnd(l)&&a),"mousemove"===e&&(a=!1!==t["ɵnov"](n,1).touchEnd(l)&&a),"touchcancel"===e&&(a=!1!==t["ɵnov"](n,1).touchEnd(l)&&a),"click"===e&&(a=!1!==t["ɵnov"](n,1).click(l)&&a),"click"===e&&(a=!1!==i.onRefresh()&&a),a},u.o,u.g)),t["ɵdid"](1,4243456,null,0,i.o,[t.ElementRef,t.Renderer2],{type:[0,"type"],size:[1,"size"]},null),(n()(),t["ɵted"](-1,1,[" 点击刷新 "]))],function(n,e){n(e,1,0,"primary","small")},null)}function d(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,c)),t["ɵdid"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵand"](0,null,null,0))],function(n,e){n(e,2,0,e.component.showRefresh)},null)}function g(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,10,"div",[["class","page-tip"]],null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,o)),t["ɵdid"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,s)),t["ɵdid"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t["ɵted"](6,null,["",""])),(n()(),t["ɵeld"](7,0,[["custom",1]],null,1,"div",[],null,null,null,null,null)),t["ɵncd"](null,0),(n()(),t["ɵand"](16777216,null,null,1,null,d)),t["ɵdid"](10,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,2,0,"loading"===(null==l.payload?null:l.payload.status)),n(e,4,0,"loading"!==(null==l.payload?null:l.payload.status)),n(e,10,0,0==t["ɵnov"](e,7).childNodes.length)},function(n,e){n(e,6,0,e.component.message)})}function p(n){return t["ɵvid"](0,[(n()(),t["ɵand"](16777216,null,null,1,null,g)),t["ɵdid"](1,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,1,0,e.component.show)},null)}},Sd73:function(n,e,l){"use strict";l.r(e);var t=l("CcnG"),a=l("+SBZ"),i=l("atIC"),u=l("1FC6"),r=l("T6nn"),o=l("B0rH"),s=l("h1wG"),c=l("fCh1"),d=l("O0u2"),g=function(){function n(n,e,l,a,i,u,r,o,s,c,d){this.umsUserService=n,this.app=e,this.liveService=l,this.logger=a,this.utils=i,this.activatedRoute=u,this.router=r,this.ngZone=o,this.normalUserService=s,this.nativeBridgeService=c,this.adminUserService=d,this.tabIndex=0,this.tabsData=[],this.expired=!1,this.messageChannel=new t.EventEmitter,this.isLoading=!1,this.isHost=!1,this.isLogined=!1,this.isRoot=!0,this.cName=this.activatedRoute.snapshot.paramMap.get("name")||"乡音直播"}return n.prototype.ngOnInit=function(){var e=this;this.appChannelSubscription=this.app.appChannel.subscribe(function(l){e.logger.debug(n.TAG+" ngOnInit() app channel payload: "+JSON.stringify(l)),l.type!==u.a.RELOAD&&l.type!==u.a.CREATELIVEROOMCOMPLETED||(e.expired=!0),l.type===u.a.USERCHANGED&&e.ngZone.run(function(){e.pageAction="init",e.pageUpdateType="all",e.tabIndex=0,e.pageLoad()})}),this.pageLoad()},n.prototype.ngAfterViewInit=function(){var e=this;this.messageChannel.subscribe(function(l){e.logger.debug(n.TAG+" ngAfterViewInit() messageChannel payload: "+JSON.stringify(l)),e.logger.debug(n.TAG+" ngAfterViewInit() messageChannel pageAction: "+e.pageAction),"refresh"===e.pageAction&&(e.pageAction="complete",e.refresher.complete())})},n.prototype.ionViewWillEnter=function(){this.isRoot=!document.querySelector("app-live.can-go-back"),this.isRoot&&this.nativeBridgeService.invoke({method:c.b.METHOD_SHOW_TAB}),this.expired&&(this.expired=!1,this.pageAction="complete",this.pageUpdateType="local",this.pageLoad())},n.prototype.ionViewWillLeave=function(){this.isRoot&&this.nativeBridgeService.invoke({method:c.b.METHOD_HIDE_TAB})},n.prototype.ngOnDestroy=function(){this.appChannelSubscription.unsubscribe()},n.prototype.publishLive=function(){this.isHost?this.router.navigate(["/standard/live/publish"]):this.utils.toast("fail","您不是主播！")},n.prototype.doRefresh=function(e){this.logger.debug(n.TAG+" doRefresh() execute"),this.pageAction="refresh",this.pageUpdateType="all",this.pageLoad()},n.prototype.onTabClick=function(n){this.tabIndex=n,this.pageAction="init",this.loadTabContent(n)},n.prototype.onDelete=function(n){var e=this.tabsData[this.tabIndex];e.list.splice(e.list.indexOf(n),1),0===e.list.length&&(e.pageTipPayload={status:"empty",message:"您还没有发起直播！"})},n.prototype.goLogin=function(){},n.prototype.goShortVideoPage=function(){this.router.navigate(["/standard/short-video",{name:"xishuangbanna"===this.app.appConfig.name?"周末去哪":"乡音分享"}],{replaceUrl:!0})},n.prototype.pageLoad=function(){var n=this;this.normalUserService.initUser("all"===this.pageUpdateType).subscribe(function(e){e.userId&&(n.isLogined=!0),n.initTabsData(function(){n.loadTabContent(n.tabIndex)})})},n.prototype.initTabsData=function(e){var l=this,t=[{name:"可查看直播",icon:"assets/images/standard/live/icon-live3-a.png",active:"assets/images/standard/live/icon-live3-f.png",list:[],pageTipPayload:{status:"loading"}},{name:"我的直播",icon:"assets/images/standard/live/icon-live1-a.png",active:"assets/images/standard/live/icon-live1-f.png",list:[],pageTipPayload:{status:"loading"}},{name:"直播管理",icon:"assets/images/standard/live/icon-live2-a.png",active:"assets/images/standard/live/icon-live2-f.png",list:[],pageTipPayload:{status:"loading"}}];this.liveService.getLiveUser("all"===this.pageUpdateType).subscribe(function(a){a&&1===a.checkFlag?(l.isHost=!0,l.tabsData=t):(l.isHost=!1,l.tabsData=[t[0]]),l.logger.log(n.TAG+" initTabsData() tabs: "+JSON.stringify(l.tabsData)),e()})},n.prototype.loadTabContent=function(n){switch(void 0===n&&(n=0),n){case 0:this.getMyWatchLiveList();break;case 1:this.getMyLiveList();break;case 2:this.getManageLiveList()}},n.prototype.getMyWatchLiveList=function(){var e=this;this.isLoading||(this.isLoading=!0,this.liveService.getMyWatchLiveList(this.isHost).subscribe(function(l){if(e.isLoading=!1,e.logger.debug(n.TAG+" getMyWatchLiveList() payload: "+JSON.stringify(l)),"success"===l.status){console.log(l.data);var t=l.data.filter(function(n){return!e.isHost||!e.adminUserService.user||n.userId!==e.adminUserService.user.id}).map(function(n){return{title:n.title,imageUrl:n.imageUrl,avatar:n.hostImageUrl,author:n.hostName,raw:n}});e.tabsData[e.tabIndex].list=t.slice(),e.tabsData[e.tabIndex].list.length||(e.tabsData[e.tabIndex].pageTipPayload={status:"empty",message:"暂无满足条件的直播"})}else"init"!==e.pageAction&&"refresh"!==e.pageAction||(e.tabsData[e.tabIndex].list=[]),e.tabsData[e.tabIndex].pageTipPayload={status:l.status,message:l.message};e.messageChannel.emit({status:l.status})}))},n.prototype.getMyLiveList=function(){var e=this;this.isLoading||(this.isLoading=!0,this.liveService.getMyLiveList(this.isHost).subscribe(function(l){if(e.isLoading=!1,e.logger.debug(n.TAG+" getMyLiveList() payload: "+JSON.stringify(l)),"success"===l.status){var t=l.data.map(function(n){return{title:n.title,imageUrl:n.liveImageUrl,avatar:n.hostImageUrl,author:n.hostName,raw:n}});e.tabsData[e.tabIndex].list=t.slice()}else"init"!==e.pageAction&&"refresh"!==e.pageAction||(e.tabsData[e.tabIndex].list=[]),e.tabsData[e.tabIndex].pageTipPayload={status:l.status,message:l.message};e.messageChannel.emit({status:l.status})}))},n.prototype.getManageLiveList=function(){var e=this;this.isLoading||(this.isLoading=!0,this.liveService.getManageLiveList().subscribe(function(l){if(e.isLoading=!1,e.logger.debug(n.TAG+" getManageLiveList() payload: "+JSON.stringify(l)),"success"===l.status){e.tabsData[e.tabIndex].isInit=!0;var t=l.data.map(function(n){return{title:n.tittle,area:n.sharedAreaName,imageUrl:n.imageUrl,avatar:n.hostImageUrl,author:n.hostName,raw:n}});e.tabsData[e.tabIndex].list=t.slice()}else"init"!==e.pageAction&&"refresh"!==e.pageAction||(e.tabsData[e.tabIndex].list=[]),e.tabsData[e.tabIndex].pageTipPayload={status:l.status,message:l.message};e.messageChannel.emit({status:l.status})}))},n.TAG="LiveComponent",n}(),p=function(){return Promise.all([l.e(0),l.e(147)]).then(l.bind(null,"eIzc")).then(function(n){return n.PublishLiveModuleNgFactory})},f=function(){return function(){}}(),h=l("pMnS"),m=l("sq0T"),v=l("r7hO"),b=l("ZYCi"),C=l("wvhG"),O=l("U3FM"),y=l("MKJQ"),x=l("jy/b"),_=l("Ip0R"),I=function(){function n(n,e,l,t,a){this.nativeBridgeService=n,this.normalUserService=e,this.adminUserService=l,this.app=t,this.utils=a}return n.prototype.ngOnInit=function(){},n.prototype.play=function(){var n=this.normalUserService.user;n?this.nativeBridgeService.invoke({method:c.b.METHOD_WATCH_LIVE},this.data.raw.playUrl,this.data.raw.title,this.data.raw.hostName,this.data.raw.roomId,n.userId,this.app.appConfig.ums.userType,n.areaId):this.utils.toast("fail","无权限浏览该直播！")},n}(),S=t["ɵcrt"]({encapsulation:0,styles:[['.item[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:relative;height:180px;overflow:hidden;background-size:100% auto;background-position:center center}.item[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .player-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:990}.item[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .player-icon[_ngcontent-%COMP%]:before{width:50px;height:50px;background-position:0 0;background-image:url(/assets/images/common/player-bg.png);background-size:100px 150px;display:inline-block;background-repeat:no-repeat;content:""}.item[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title-box[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;z-index:100;display:flex;justify-content:space-between;padding:0 12px 8px;color:#fff}.item[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title-box[_ngcontent-%COMP%]:before{position:absolute;left:0;bottom:0;right:0;content:"";z-index:-1;height:48px;background-image:linear-gradient(to top,rgba(0,0,0,.5) 0,rgba(0,0,0,0) 100%);background-repeat:repeat-x}.item[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:var(--font-size-md);font-weight:700}.item[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 16px}.item[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:30px}.item[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:6px;border-radius:15px;background-color:var(--ion-color-light)}.item[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{flex:1;color:var(--text-color-primary)}']],data:{}});function A(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,10,"div",[["class","item"]],null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,4,"div",[["class","header"]],[[4,"backgroundImage",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.play()&&t),t},null,null)),(n()(),t["ɵeld"](2,0,null,null,2,"div",[["class","title-box"]],null,null,null,null,null)),(n()(),t["ɵeld"](3,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(n()(),t["ɵted"](4,null,["",""])),(n()(),t["ɵeld"](5,0,null,null,0,"div",[["class","player-icon"]],null,null,null,null,null)),(n()(),t["ɵeld"](6,0,null,null,4,"div",[["class","footer"]],null,null,null,null,null)),(n()(),t["ɵeld"](7,0,null,null,1,"div",[["class","avatar"]],null,null,null,null,null)),(n()(),t["ɵeld"](8,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),t["ɵeld"](9,0,null,null,1,"div",[["class","author"]],null,null,null,null,null)),(n()(),t["ɵted"](10,null,["",""]))],null,function(n,e){var l=e.component;n(e,1,0,"url("+(null==l.data?null:l.data.imageUrl)+")"),n(e,4,0,null==l.data?null:l.data.title),n(e,8,0,(null==l.data?null:l.data.avatar)||"assets/images/common/default-avatar.png"),n(e,10,0,(null==l.data?null:l.data.author)||"已删除")})}function M(n){return t["ɵvid"](0,[(n()(),t["ɵand"](16777216,null,null,1,null,A)),t["ɵdid"](1,16384,null,0,_.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,1,0,e.component.data)},null)}var P=l("lbwW"),R=function(){function n(n,e,l,a){this.aums=n,this.adminUserService=e,this.utils=l,this.nativeBridgeService=a,this.delete=new t.EventEmitter}return n.prototype.ngOnInit=function(){},n.prototype.play=function(){this.nativeBridgeService.invoke({method:c.b.METHOD_HOST_ENTER_LIVE},this.data.raw.uploadUrl,this.data.raw.roomId,this.adminUserService.user.id,this.adminUserService.user.password)},n.prototype.onDelete=function(){var n=this;this.adminUserService.user?this.aums.stopLive({roomId:this.data.raw.roomId,userId:this.adminUserService.user.id.toString()}).subscribe(function(e){"success"===e.status?(n.utils.toast("success","关闭直播间成功"),n.delete.emit(n.data)):n.utils.toast("fail",e.message||"关闭直播间失败，请稍后再试！")}):this.utils.toast("fail","无关闭直播间权限！")},n}(),T=t["ɵcrt"]({encapsulation:0,styles:[['.img-box[_ngcontent-%COMP%]{position:relative;height:180px;overflow:hidden;background-size:100% auto;background-position:center center}.img-box[_ngcontent-%COMP%]   .player-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:990}.img-box[_ngcontent-%COMP%]   .player-icon[_ngcontent-%COMP%]:before{width:50px;height:50px;background-position:0 0;background-image:url(/assets/images/common/player-bg.png);background-size:100px 150px;display:inline-block;background-repeat:no-repeat;content:""}.title-box[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:100;padding:12px 8px 0;color:#fff}.title-box[_ngcontent-%COMP%]:before{position:absolute;left:0;top:0;right:0;content:"";z-index:-1;height:48px;background-image:linear-gradient(to bottom,rgba(0,0,0,.5) 0,rgba(0,0,0,0) 100%);background-repeat:repeat-x}.title-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:var(--font-size-md);font-weight:700;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.sub-title[_ngcontent-%COMP%]{display:flex;align-items:center}.sub-title[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:6px;border-radius:15px;background-color:var(--ion-color-light)}.sub-title[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{color:var(--text-color-title)}.sub-title[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-size:var(--font-size-xs);transform-origin:0 0}.action[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;border-top:1px solid #eee;padding-top:8px}']],data:{}});function w(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,24,"ion-card",[],null,null,null,y.lb,y.g)),t["ɵdid"](1,49152,null,0,x.n,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](2,0,null,0,4,"div",[["class","img-box"]],[[4,"backgroundImage",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.play()&&t),t},null,null)),(n()(),t["ɵeld"](3,0,null,null,0,"div",[["class","player-icon"]],null,null,null,null,null)),(n()(),t["ɵeld"](4,0,null,null,2,"div",[["class","title-box"]],null,null,null,null,null)),(n()(),t["ɵeld"](5,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(n()(),t["ɵted"](6,null,["",""])),(n()(),t["ɵeld"](7,0,null,0,11,"ion-card-header",[],null,null,null,y.ib,y.i)),t["ɵdid"](8,49152,null,0,x.p,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](9,0,null,0,9,"ion-card-subtitle",[],null,null,null,y.jb,y.j)),t["ɵdid"](10,49152,null,0,x.q,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](11,0,null,0,7,"div",[["class","sub-title"]],null,null,null,null,null)),(n()(),t["ɵeld"](12,0,null,null,1,"div",[["class","avatar"]],null,null,null,null,null)),(n()(),t["ɵeld"](13,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),t["ɵeld"](14,0,null,null,4,"div",[["class","author-box"]],null,null,null,null,null)),(n()(),t["ɵeld"](15,0,null,null,1,"div",[["class","author"]],null,null,null,null,null)),(n()(),t["ɵted"](16,null,["",""])),(n()(),t["ɵeld"](17,0,null,null,1,"div",[["class","location"]],null,null,null,null,null)),(n()(),t["ɵted"](18,null,["",""])),(n()(),t["ɵeld"](19,0,null,0,5,"ion-card-content",[],null,null,null,y.hb,y.h)),t["ɵdid"](20,49152,null,0,x.o,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](21,0,null,0,3,"div",[["class","action"]],null,null,null,null,null)),(n()(),t["ɵeld"](22,0,null,null,2,"ion-button",[["color","danger"],["fill","outline"],["shape","round"],["size","small"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.onDelete()&&t),t},y.fb,y.e)),t["ɵdid"](23,49152,null,0,x.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],fill:[1,"fill"],shape:[2,"shape"],size:[3,"size"]},null),(n()(),t["ɵted"](-1,0,["删除直播间"]))],function(n,e){n(e,23,0,"danger","outline","round","small")},function(n,e){var l=e.component;n(e,2,0,"url("+(null==l.data?null:l.data.imageUrl)+")"),n(e,6,0,null==l.data?null:l.data.title),n(e,13,0,(null==l.data?null:l.data.avatar)||"assets/images/common/default-avatar.png"),n(e,16,0,(null==l.data?null:l.data.author)||"已删除"),n(e,18,0,null==l.data?null:l.data.area)})}var L=l("s0BX"),E=l("TN67"),k=function(){function n(n,e,l,t,a,i,u,r){this.aums=n,this.utils=e,this.adminUserService=l,this.app=t,this.actionSheetCtrl=a,this.areaTreeService=i,this.router=u,this.liveService=r,this.checkNameList=["待审核","通过审核","不通过审核"]}return n.prototype.ngOnInit=function(){},n.prototype.play=function(){},n.prototype.check=function(){var n=this;console.log(this.data.raw.livePass);var e=this.checkNameList[this.data.raw.livePass];if(e){var l=function(e){n.adminUserService.user?n.aums.checkLive({roomId:n.data.raw.roomId,userId:n.data.raw.hostId,livePass:e}).subscribe(function(l){"success"===l.status?(n.data.raw.livePass=e,n.utils.toast("success","更新直播状态为"+n.checkNameList[e])):n.utils.toast("fail","更新直播状态失败，请稍后再试!")}):n.utils.toast("fail","您没有权限操作！")};this.actionSheetCtrl.create({header:"直播审核",buttons:[{text:"待审核",handler:function(){l(0)}},{text:"通过审核",handler:function(){l(1)}},{text:"不通过审核",handler:function(){l(2)}},{text:"关闭",handler:function(){}}].filter(function(n){return n.text!==e})}).then(function(n){n.present()})}else this.utils.toast("fail","未知审核状态")},n.prototype.share=function(){var n=this;this.liveService.getLiveUser().subscribe(function(e){var l;if(e&&0!=e.isShare?1!=e.checkFlag&&(l="当前用户主播权限还在审核中！"):l="当前用户没有分享权限！",l)n.utils.toast("fail",l);else{n.areaTreeService.businessType=E.a.LIVE_SHARE,n.areaTreeService.reset();var t=n.app.appChannel.subscribe(function(e){e.type===u.a.SELECTAREA&&n.areaTreeService.businessType===E.a.LIVE_SHARE&&(n.postShareArea("share",e.data.areaId,e.data.areaName,!1),t.unsubscribe())});n.router.navigate(["/standard/area-tree",{upLevel:e.isShare}])}})},n.prototype.shareStb=function(){var n=this;this.liveService.getLiveUser().subscribe(function(e){if(e&&1==e.isPublishDevice&&0!=e.isShare)if(1==e.checkFlag){var l=[{text:"分享到可观看区域",handler:function(){n.areaTreeService.businessType=E.a.LIVE_SHARE_STB,n.areaTreeService.reset();var l=n.app.appChannel.subscribe(function(e){e.type===u.a.SELECTAREA&&n.areaTreeService.businessType===E.a.LIVE_SHARE_STB&&(n.postShareArea("share",e.data.areaId,e.data.areaName,!0),l.unsubscribe())});n.router.navigate(["/standard/area-tree",{upLevel:e.isShare}])}},{text:"取消观看",handler:function(){n.postShareArea("cancel","0","",!0)}},{text:"关闭",handler:function(){}}];n.actionSheetCtrl.create({header:"设置机顶盒是否观看？",buttons:l}).then(function(n){n.present()})}else n.utils.toast("fail","当前用户主播权限还在审核中！");else n.utils.toast("fail","当前用户没有分享到机顶盒权限！")})},n.prototype.postShareArea=function(n,e,l,t){var a=this,i=this.adminUserService.user;i?this.aums.shareLive({userId:i.id.toString(),roomId:this.data.raw.roomId,regionId:e,toStb:t?1:0}).subscribe(function(i){"success"===i.status?1001==i.data.errorCode?"share"===n?(a.utils.toast("success",t?"分享到机顶盒成功":"分享区域设置成功"),a.data.raw.stbShareRegionId=e,t?a.data.raw.stbShareRegionName=l:a.data.raw.sharedAreaName=l):a.utils.toast("success","取消分享到机顶盒成功"):a.shareFailToast(t,i.data.errorCode):a.utils.toast("fail",i.message||"分享区域设置失败，请稍后再试！")}):this.utils.toast("fail","管理员未登录！")},n.prototype.shareFailToast=function(n,e){var l,t=n?"机顶盒":"";switch(e){case 1002:l="用户不存在";break;case 1003:l=n?"您没有分享到"+t+"权限":"您没有分享权限";break;case 1004:l="您没有分享"+t+"到指定区域的权限";break;case 1005:l="您还没有设置归属地";break;default:l="分享失败，请稍后重试"}this.utils.toast("fail",l)},n}(),N=t["ɵcrt"]({encapsulation:0,styles:[['.img-box[_ngcontent-%COMP%]{position:relative;height:180px;overflow:hidden}.img-box[_ngcontent-%COMP%]   .player-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:990}.img-box[_ngcontent-%COMP%]   .player-icon[_ngcontent-%COMP%]:before{width:50px;height:50px;background-position:0 0;background-image:url(/assets/images/common/player-bg.png);background-size:100px 150px;display:inline-block;background-repeat:no-repeat;content:""}.title-box[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:100;padding:12px 8px 0;color:#fff}.title-box[_ngcontent-%COMP%]:before{position:absolute;left:0;top:0;right:0;content:"";z-index:-1;height:48px;background-image:linear-gradient(to bottom,rgba(0,0,0,.5) 0,rgba(0,0,0,0) 100%);background-repeat:repeat-x}.title-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.sub-title[_ngcontent-%COMP%]{display:flex;align-items:center}.sub-title[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:6px;border-radius:15px}.sub-title[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{color:var(--text-color-primary)}.sub-title[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-size:var(--font-size-xs);transform-origin:0 0}.settings[_ngcontent-%COMP%]{padding-top:10px}.settings[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.settings[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-color-primary);font-size:var(--font-size-sm)}.settings[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-color-secondary)}.action[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;border-top:1px solid #eee;padding-top:8px}']],data:{}});function U(n){return t["ɵvid"](0,[t["ɵpid"](0,L.a,[O.b]),(n()(),t["ɵeld"](1,0,null,null,47,"ion-card",[],null,null,null,y.lb,y.g)),t["ɵdid"](2,49152,null,0,x.n,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](3,0,null,0,4,"div",[["class","img-box"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.play()&&t),t},null,null)),(n()(),t["ɵeld"](4,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),t["ɵeld"](5,0,null,null,2,"div",[["class","title-box"]],null,null,null,null,null)),(n()(),t["ɵeld"](6,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(n()(),t["ɵted"](7,null,["",""])),(n()(),t["ɵeld"](8,0,null,0,28,"ion-card-header",[],null,null,null,y.ib,y.i)),t["ɵdid"](9,49152,null,0,x.p,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](10,0,null,0,26,"ion-card-subtitle",[],null,null,null,y.jb,y.j)),t["ɵdid"](11,49152,null,0,x.q,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](12,0,null,0,7,"div",[["class","sub-title"]],null,null,null,null,null)),(n()(),t["ɵeld"](13,0,null,null,1,"div",[["class","avatar"]],null,null,null,null,null)),(n()(),t["ɵeld"](14,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),t["ɵeld"](15,0,null,null,4,"div",[["class","author-box"]],null,null,null,null,null)),(n()(),t["ɵeld"](16,0,null,null,1,"div",[["class","author"]],null,null,null,null,null)),(n()(),t["ɵted"](17,null,["",""])),(n()(),t["ɵeld"](18,0,null,null,1,"div",[["class","location"]],null,null,null,null,null)),(n()(),t["ɵted"](19,null,["",""])),(n()(),t["ɵeld"](20,0,null,0,16,"div",[["class","settings"]],null,null,null,null,null)),(n()(),t["ɵeld"](21,0,null,null,5,"div",[["class","setting-item"]],null,null,null,null,null)),(n()(),t["ɵeld"](22,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["审核状态："])),(n()(),t["ɵeld"](24,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),t["ɵted"](25,null,["",""])),t["ɵppd"](26,1),(n()(),t["ɵeld"](27,0,null,null,4,"div",[["class","setting-item"]],null,null,null,null,null)),(n()(),t["ɵeld"](28,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["分享区域："])),(n()(),t["ɵeld"](30,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["ɵted"](31,null,["",""])),(n()(),t["ɵeld"](32,0,null,null,4,"div",[["class","setting-item"]],null,null,null,null,null)),(n()(),t["ɵeld"](33,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["机顶盒可观看区域："])),(n()(),t["ɵeld"](35,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["ɵted"](36,null,["",""])),(n()(),t["ɵeld"](37,0,null,0,11,"ion-card-content",[],null,null,null,y.hb,y.h)),t["ɵdid"](38,49152,null,0,x.o,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](39,0,null,0,9,"div",[["class","action"]],null,null,null,null,null)),(n()(),t["ɵeld"](40,0,null,null,2,"ion-button",[["color","secondary"],["fill","outline"],["shape","round"],["size","small"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.check()&&t),t},y.fb,y.e)),t["ɵdid"](41,49152,null,0,x.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],fill:[1,"fill"],shape:[2,"shape"],size:[3,"size"]},null),(n()(),t["ɵted"](-1,0,["审核"])),(n()(),t["ɵeld"](43,0,null,null,2,"ion-button",[["color","secondary"],["fill","outline"],["shape","round"],["size","small"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.share()&&t),t},y.fb,y.e)),t["ɵdid"](44,49152,null,0,x.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],fill:[1,"fill"],shape:[2,"shape"],size:[3,"size"]},null),(n()(),t["ɵted"](-1,0,["分享"])),(n()(),t["ɵeld"](46,0,null,null,2,"ion-button",[["color","secondary"],["fill","outline"],["shape","round"],["size","small"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.shareStb()&&t),t},y.fb,y.e)),t["ɵdid"](47,49152,null,0,x.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{color:[0,"color"],fill:[1,"fill"],shape:[2,"shape"],size:[3,"size"]},null),(n()(),t["ɵted"](-1,0,["机顶盒"]))],function(n,e){n(e,41,0,"secondary","outline","round","small"),n(e,44,0,"secondary","outline","round","small"),n(e,47,0,"secondary","outline","round","small")},function(n,e){var l=e.component;n(e,4,0,null==l.data?null:l.data.imageUrl),n(e,7,0,null==l.data?null:l.data.title),n(e,14,0,(null==l.data?null:l.data.avatar)||"assets/images/common/default-avatar.png"),n(e,17,0,(null==l.data?null:l.data.author)||"用户不存在"),n(e,19,0,null==l.data?null:l.data.area);var a=t["ɵunv"](e,25,0,n(e,26,0,t["ɵnov"](e,0),null==l.data?null:null==l.data.raw?null:l.data.raw.livePass));n(e,25,0,a),n(e,31,0,null==l.data?null:null==l.data.raw?null:l.data.raw.sharedAreaName),n(e,36,0,"0"===(null==l.data?null:null==l.data.raw?null:l.data.raw.stbShareRegionId)?"机顶盒不可观看":l.data.raw.stbShareRegionName)})}var j=l("57in"),D=l("xvo6"),V=t["ɵcrt"]({encapsulation:0,styles:[[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;left:0;top:0;right:0;bottom:0}.main[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]{width:100px;position:absolute;right:16px;top:16px}.main[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.main[_ngcontent-%COMP%]   .green-color[_ngcontent-%COMP%]{color:var(--text-color-title)}.main[_ngcontent-%COMP%]   .service-catalog-container[_ngcontent-%COMP%]{flex:none;margin-bottom:64px;width:100%;position:relative;background:url(top-bg.dc1f5ae1ea3f8b909204.png) left top/100% 100% no-repeat #fff}.main[_ngcontent-%COMP%]   .service-catalog-container[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{height:150px}.main[_ngcontent-%COMP%]   .service-catalog-container[_ngcontent-%COMP%]   .live-publish-btn[_ngcontent-%COMP%]{position:absolute;background:url(live-icon.4d7f2e8483a7ecbccd55.png) left top/auto 100% no-repeat;width:80px;height:80px;bottom:0;left:50%;margin-left:-40px;margin-bottom:-40px}.main[_ngcontent-%COMP%]   .service-catalog-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:0;margin-left:-28px;margin-bottom:-50px}.main[_ngcontent-%COMP%]   .view-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.main[_ngcontent-%COMP%]   .view-box[_ngcontent-%COMP%]   .ums-unlogin-view[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center}.main[_ngcontent-%COMP%]   .view-box[_ngcontent-%COMP%]   .ums-unlogin-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px}.main[_ngcontent-%COMP%]   .view-box[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;flex:none;padding:0 16px}.main[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{display:flex;flex:10;flex-direction:column}.main[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}.main[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]  .header .title, .main[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]  .title-box .title{text-shadow:0 0 3px #000}.main[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   evm-page-tip[_ngcontent-%COMP%]{display:flex;flex:1}"]],data:{}});function H(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-entry-header",[],null,null,null,m.b,m.a)),t["ɵdid"](1,114688,null,0,v.a,[s.a,b.m,C.a,O.b,c.b],null,null)],function(n,e){n(e,1,0)},null)}function z(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,3,"ion-buttons",[["slot","start"]],null,null,null,y.gb,y.f)),t["ɵdid"](1,49152,null,0,x.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](2,0,null,0,1,"ion-icon",[["name","chevron-back-outline"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.app.back()&&t),t},y.vb,y.u)),t["ɵdid"](3,49152,null,0,x.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(n()(),t["ɵeld"](4,0,null,null,2,"ion-title",[],null,null,null,y.Zb,y.Y)),t["ɵdid"](5,49152,null,0,x.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](6,0,[" "," "]))],function(n,e){n(e,3,0,"chevron-back-outline")},function(n,e){n(e,6,0,e.component.cName)})}function B(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(n,e,l){var t=!0;return"ionRefresh"===e&&(t=!1!==n.component.doRefresh(l)&&t),t},y.Mb,y.K)),t["ɵdid"](1,49152,[[1,4]],0,x.bb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](2,0,null,0,1,"ion-refresher-content",[],null,null,null,y.Lb,y.L)),t["ɵdid"](3,49152,null,0,x.cb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null)],null,null)}function G(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"span",[],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.onTabClick(n.context.index)&&t),t},null,null)),(n()(),t["ɵeld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,e){n(e,1,0,e.context.index===e.component.tabIndex?e.context.$implicit.active:e.context.$implicit.icon)})}function Z(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,"div",[["class","tabs"]],null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,G)),t["ɵdid"](2,278528,null,0,_.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,2,0,e.component.tabsData)},null)}function F(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-watch-live-item",[],null,null,null,M,S)),t["ɵdid"](1,114688,null,0,I,[c.b,s.a,d.a,i.a,o.a],{data:[0,"data"],host:[1,"host"]},null)],function(n,e){n(e,1,0,e.parent.context.$implicit,e.component.isHost)},null)}function J(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-my-live-item",[],null,[[null,"delete"]],function(n,e,l){var t=!0;return"delete"===e&&(t=!1!==n.component.onDelete(l)&&t),t},w,T)),t["ɵdid"](1,114688,null,0,R,[P.a,d.a,o.a,c.b],{data:[0,"data"]},{delete:"delete"})],function(n,e){n(e,1,0,e.parent.context.$implicit)},null)}function W(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-manage-live-item",[],null,null,null,U,N)),t["ɵdid"](1,114688,null,0,k,[P.a,o.a,d.a,i.a,x.a,E.b,b.m,r.a],{data:[0,"data"]},null)],function(n,e){n(e,1,0,e.parent.context.$implicit)},null)}function $(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,8,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,7,null,null,null,null,null,null,null)),t["ɵdid"](2,16384,null,0,_.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,F)),t["ɵdid"](4,278528,null,0,_.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,_.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,J)),t["ɵdid"](6,278528,null,0,_.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,_.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,W)),t["ɵdid"](8,278528,null,0,_.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,_.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["ɵand"](0,null,null,0))],function(n,e){n(e,2,0,e.parent.context.index),n(e,4,0,0),n(e,6,0,1),n(e,8,0,2)},null)}function q(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"evm-page-tip",[],null,[[null,"refresh"]],function(n,e,l){var t=!0;return"refresh"===e&&(t=!1!==n.component.pageLoad()&&t),t},j.b,j.a)),t["ɵdid"](1,638976,null,0,D.d,[t.ElementRef,t.Renderer2],{payload:[0,"payload"]},{refresh:"refresh"})],function(n,e){n(e,1,0,null==e.parent.context.$implicit?null:e.parent.context.$implicit.pageTipPayload)},null)}function Y(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,4,"div",[["class","content-box"]],[[2,"hidden",null]],null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,$)),t["ɵdid"](3,278528,null,0,_.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,q)),t["ɵdid"](5,16384,null,0,_.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,3,0,null==e.context.$implicit?null:e.context.$implicit.list),n(e,5,0,!(null!=e.context.$implicit&&null!=e.context.$implicit.list&&e.context.$implicit.list.length))},function(n,e){n(e,1,0,e.context.index!==e.component.tabIndex)})}function K(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,Z)),t["ɵdid"](2,16384,null,0,_.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](3,0,null,null,2,"div",[["class","tab-content"]],null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,Y)),t["ɵdid"](5,278528,null,0,_.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,2,0,(null==l.tabsData?null:l.tabsData.length)>1),n(e,5,0,l.tabsData)},null)}function X(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,5,"div",[["class","ums-unlogin-view"]],null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["游客身份不能使用直播"])),(n()(),t["ɵeld"](3,0,null,null,2,"ion-button",[["shape","round"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.goLogin()&&t),t},y.fb,y.e)),t["ɵdid"](4,49152,null,0,x.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{shape:[0,"shape"]},null),(n()(),t["ɵted"](-1,0,["请登录"]))],function(n,e){n(e,4,0,"round")},null)}function Q(n){return t["ɵvid"](0,[t["ɵqud"](671088640,1,{refresher:0}),(n()(),t["ɵeld"](1,0,null,null,6,"ion-header",[],null,null,null,y.ub,y.t)),t["ɵdid"](2,49152,null,0,x.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](3,0,null,0,4,"ion-toolbar",[],null,null,null,y.bc,y.ab)),t["ɵdid"](4,49152,null,0,x.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"]},null),(n()(),t["ɵand"](16777216,null,0,1,null,H)),t["ɵdid"](6,16384,null,0,_.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["ɵand"](0,[["nonRootView",2]],0,0,null,z)),(n()(),t["ɵeld"](8,0,null,null,16,"ion-content",[],null,null,null,y.ob,y.n)),t["ɵdid"](9,49152,null,0,x.v,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,B)),t["ɵdid"](11,16384,null,0,_.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](12,0,null,0,12,"div",[["class","main"]],null,null,null,null,null)),(n()(),t["ɵeld"](13,0,null,null,7,"div",[["class","service-catalog-container"]],null,null,null,null,null)),(n()(),t["ɵeld"](14,0,null,null,6,"div",[["class","inner"]],null,null,null,null,null)),(n()(),t["ɵeld"](15,0,null,null,1,"div",[["class","link-btn link-btn-live"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.goShortVideoPage()&&t),t},null,null)),(n()(),t["ɵeld"](16,0,null,null,0,"img",[["src","assets/images/standard/live/daixiang-btn-share.png"]],null,null,null,null,null)),(n()(),t["ɵeld"](17,0,null,null,3,"div",[],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.publishLive()&&t),t},null,null)),(n()(),t["ɵeld"](18,0,null,null,0,"div",[["class","live-publish-btn"]],null,null,null,null,null)),(n()(),t["ɵeld"](19,0,null,null,1,"p",[["class","green-color"]],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["发起直播"])),(n()(),t["ɵeld"](21,0,null,null,3,"div",[["class","view-box"]],null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,K)),t["ɵdid"](23,16384,null,0,_.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["ɵand"](0,[["umsUnloginView",2]],null,0,null,X))],function(n,e){var l=e.component;n(e,4,0,l.isRoot?"md":"ios"),n(e,6,0,l.isRoot,t["ɵnov"](e,7)),n(e,11,0,null==l.tabsData?null:l.tabsData.length),n(e,23,0,l.isLogined,t["ɵnov"](e,24))},null)}function nn(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-live",[],null,null,null,Q,V)),t["ɵdid"](1,4440064,null,0,g,[a.a,i.a,r.a,O.b,o.a,b.a,b.m,t.NgZone,s.a,c.b,d.a],null,null)],function(n,e){n(e,1,0)},null)}var en=t["ɵccf"]("app-live",g,nn,{},{},[]),ln=l("gIcY"),tn=l("PqVL"),an=l("YBzL"),un=l("zi6J"),rn=function(){return function(){}}(),on=function(){return function(){}}(),sn=l("utMG"),cn=function(){return function(){}}();l.d(e,"LiveModuleNgFactory",function(){return dn});var dn=t["ɵcmf"](f,[],function(n){return t["ɵmod"]([t["ɵmpd"](512,t.ComponentFactoryResolver,t["ɵCodegenComponentFactoryResolver"],[[8,[h.a,en]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["ɵmpd"](4608,_.NgLocalization,_.NgLocaleLocalization,[t.LOCALE_ID,[2,_["ɵangular_packages_common_common_a"]]]),t["ɵmpd"](4608,x.c,x.c,[t.NgZone,t.ApplicationRef]),t["ɵmpd"](4608,x.Fb,x.Fb,[x.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,x.Jb,x.Jb,[x.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,ln.y,ln.y,[]),t["ɵmpd"](1073742336,_.CommonModule,_.CommonModule,[]),t["ɵmpd"](1073742336,b.n,b.n,[[2,b.s],[2,b.m]]),t["ɵmpd"](1073742336,x.Cb,x.Cb,[]),t["ɵmpd"](1073742336,tn.cb,tn.cb,[]),t["ɵmpd"](1073742336,tn.vb,tn.vb,[]),t["ɵmpd"](1073742336,an.a,an.a,[]),t["ɵmpd"](1073742336,un.a,un.a,[]),t["ɵmpd"](1073742336,rn,rn,[]),t["ɵmpd"](1073742336,on,on,[]),t["ɵmpd"](1073742336,tn.Mc,tn.Mc,[]),t["ɵmpd"](1073742336,tn.Kc,tn.Kc,[]),t["ɵmpd"](1073742336,ln.x,ln.x,[]),t["ɵmpd"](1073742336,ln.i,ln.i,[]),t["ɵmpd"](1073742336,tn.kb,tn.kb,[]),t["ɵmpd"](1073742336,tn.p,tn.p,[]),t["ɵmpd"](1073742336,D.b,D.b,[]),t["ɵmpd"](1073742336,sn.a,sn.a,[]),t["ɵmpd"](1073742336,cn,cn,[]),t["ɵmpd"](1073742336,f,f,[]),t["ɵmpd"](1024,b.k,function(){return[[{path:"",component:g},{path:"publish",loadChildren:p}]]},[])])})},T6nn:function(n,e,l){"use strict";l.d(e,"a",function(){return c});var t=l("F/XL"),a=l("O0u2"),i=l("lbwW"),u=l("67Y/"),r=l("15JJ"),o=l("h1wG"),s=l("CcnG"),c=function(){function n(n,e,l){this.adminUserService=n,this.aums=e,this.normalUserService=l}return n.prototype.getLiveUser=function(n){var e=this;return void 0===n&&(n=!1),this.adminUserService.refetch=n,this.adminUserService.user?(n&&(this.liveUser=null),this.liveUser?Object(t.a)(this.liveUser):this.aums.getHostInfo({userId:this.adminUserService.user.id.toString()}).pipe(Object(u.a)(function(n){return e.liveUser="success"===n.status?n.data:null,e.liveUser}))):(this.liveUser=null,Object(t.a)(null))},n.prototype.getMyWatchLiveList=function(n){var e=this;return Object(t.a)(n).pipe(Object(r.a)(function(n){if(n)return e.adminUserService.user?Object(t.a)({status:"success",data:{areaId:e.adminUserService.user.areaId,userId:e.adminUserService.user.id.toString()}}):Object(t.a)({status:"error",message:"管理用户未登录！"});var l=e.normalUserService.user;return l?Object(t.a)({status:"success",data:{areaId:l.areaId,userId:l.userId}}):Object(t.a)({status:"error",message:"未找到普通用户！"})}),Object(r.a)(function(n){return"success"===n.status?e.aums.getMyWacthLive({userId:n.data.userId,regionId:n.data.areaId}).pipe(Object(u.a)(function(n){return"success"===n.status?{status:"success",data:n.data}:n})):Object(t.a)(n)}))},n.prototype.getMyLiveList=function(n){var e=this;return Object(t.a)(n).pipe(Object(r.a)(function(n){if(n)return e.adminUserService.user?Object(t.a)({status:"success",data:{userId:e.adminUserService.user.id.toString()}}):Object(t.a)({status:"error",message:"管理用户未登录！"});var l=e.normalUserService.user;return l?Object(t.a)({status:"success",data:{userId:l.userId}}):Object(t.a)({status:"error",message:"未找到普通用户！"})}),Object(r.a)(function(n){return"success"===n.status?e.aums.getMyLive({userId:n.data.userId}).pipe(Object(u.a)(function(n){return"success"===n.status?{status:"success",data:[n.data]}:n})):Object(t.a)(n)}))},n.prototype.getManageLiveList=function(){var n=this;return Object(t.a)(this.adminUserService.user).pipe(Object(r.a)(function(n){return n?Object(t.a)({status:"success",data:{userId:n.id.toString(),areaId:n.areaId}}):Object(t.a)({status:"error",message:"管理用户未登录！"})}),Object(r.a)(function(e){return"success"===e.status?n.aums.getMyManagerLive({userId:e.data.userId,regionId:e.data.areaId}).pipe(Object(u.a)(function(n){return"success"===n.status?{status:"success",data:n.data}:n})):Object(t.a)(e)}))},n.ngInjectableDef=s["ɵɵdefineInjectable"]({factory:function(){return new n(s["ɵɵinject"](a.a),s["ɵɵinject"](i.a),s["ɵɵinject"](o.a))},token:n,providedIn:"root"}),n}()},TN67:function(n,e,l){"use strict";l.d(e,"a",function(){return c}),l.d(e,"b",function(){return d});var t=l("lbwW"),a=l("F/XL"),i=l("15JJ"),u=l("67Y/"),r=l("O0u2"),o=l("atIC"),s=l("CcnG"),c=function(n){return n[n.SELECT_PUBLIC_AREA=0]="SELECT_PUBLIC_AREA",n[n.SHORT_VIDEO_SHARE=1]="SHORT_VIDEO_SHARE",n[n.SHORT_VIDEO_SHARE_STB=2]="SHORT_VIDEO_SHARE_STB",n[n.LIVE_SHARE=3]="LIVE_SHARE",n[n.LIVE_SHARE_STB=4]="LIVE_SHARE_STB",n[n.ARTICLE_PUBLISH_AREA=5]="ARTICLE_PUBLISH_AREA",n[n.SELECT_BELONGS_AREA=6]="SELECT_BELONGS_AREA",n[n.ARTICLE_SHARE=7]="ARTICLE_SHARE",n}({}),d=function(){function n(n,e,l){this.aums=n,this.adminUserService=e,this.app=l,this.userSelectAllArea="",this.userSelectTown="",this.formatAreaTree=[]}return Object.defineProperty(n.prototype,"selectedAreaList",{get:function(){return this._selectedAreaList},enumerable:!0,configurable:!0}),n.prototype.reset=function(){this.shareShortVideoAreaTree=null,this.shareLiveAreaTree=null,this.articlePublishAreaTree=null,this.pageCount=1},n.prototype.addSelectedAreaList=function(n,e){void 0===e&&(e=!1),this._selectedAreaList&&!e||(this._selectedAreaList=[]),this._selectedAreaList.push(n)},n.prototype.getList=function(n){var e=this,l=n.areaId,t=n.upLevel;return Object(a.a)(this.businessType).pipe(Object(i.a)(function(n){switch(n){case c.SELECT_PUBLIC_AREA:case c.SELECT_BELONGS_AREA:return e.aums.getAreaList({areaId:l}).pipe(Object(u.a)(function(n){var e=n.data&&n.data.children;return Array.isArray(e)&&e.length?{status:"success",data:e}:Array.isArray(e)?{status:"empty"}:n}));case c.SHORT_VIDEO_SHARE:case c.SHORT_VIDEO_SHARE_STB:return e.getShareShortVideoAreaTree(l);case c.LIVE_SHARE:case c.LIVE_SHARE_STB:return e.getShareLiveAreaTree(t,l);case c.ARTICLE_PUBLISH_AREA:return e.getArticlePublishAreaTree(l);case c.ARTICLE_SHARE:return e.getShareArticleAreaTree(t,l)}}))},n.prototype.getShareShortVideoAreaTree=function(n){var e=this;if(n){var l=this.getChildrenAreaTreeByAreaId(this.shareShortVideoAreaTree,n);return Array.isArray(l)&&l.length?Object(a.a)({status:"success",data:l}):Object(a.a)({status:"error",message:"当前分享区域为空"})}return Object(a.a)(this.adminUserService.user).pipe(Object(i.a)(function(n){return n?e.aums.getShareShortVideoAreaTree({userId:n.id.toString(),userType:e.app.appConfig.aums.userType}).pipe(Object(u.a)(function(n){return"success"===n.status?(e.shareShortVideoAreaTree=e.convertToAreaList(n.data),{status:"success",data:e.shareShortVideoAreaTree}):n})):Object(a.a)({status:"error",message:"管理用户未登录！"})}))},n.prototype.getShareLiveAreaTree=function(n,e){var l=this;if(e){var t=this.getChildrenAreaTreeByAreaId(this.shareLiveAreaTree,e);return Array.isArray(t)&&t.length?Object(a.a)({status:"success",data:t}):Object(a.a)({status:"error",message:"当前分享区域为空"})}return Object(a.a)(this.adminUserService.user).pipe(Object(i.a)(function(e){return e?l.aums.getAreaListByAreaId({regionId:e.areaId,upperLevel:n,lowerLevel:7,needDetailInfo:!0}).pipe(Object(u.a)(function(n){return"success"===n.status?(l.shareLiveAreaTree=l.convertToAreaList(n.data),{status:"success",data:l.shareLiveAreaTree}):n})):Object(a.a)({status:"error",message:"管理用户未登录！"})}))},n.prototype.getShareArticleAreaTree=function(n,e){var l=this;if(e){var t=this.getChildrenAreaTreeByAreaId(this.shareArticleAreaTree,e);return Array.isArray(t)&&t.length?Object(a.a)({status:"success",data:t}):Object(a.a)({status:"error",message:"当前分享区域为空"})}return Object(a.a)(this.adminUserService.user).pipe(Object(i.a)(function(e){return e?l.aums.getAreaListByAreaId({regionId:e.areaId,upperLevel:n,lowerLevel:7,needDetailInfo:!0}).pipe(Object(u.a)(function(n){return"success"===n.status?(l.shareArticleAreaTree=l.convertToAreaList(n.data),{status:"success",data:l.shareArticleAreaTree}):n})):Object(a.a)({status:"error",message:"管理用户未登录！"})}))},n.prototype.getArticlePublishAreaTree=function(n){var e=this;if(n){var l=this.getChildrenAreaTreeByAreaId(this.articlePublishAreaTree,n);return Array.isArray(l)&&l.length?Object(a.a)({status:"success",data:l}):Object(a.a)({status:"error",message:"可发布区域为空"})}return Object(a.a)(this.adminUserService.user).pipe(Object(i.a)(function(n){return n?e.aums.articlePublishAreaTree({areaId:n.areaId}).pipe(Object(u.a)(function(n){return"success"===n.status?(e.articlePublishAreaTree=e.convertToAreaList(n.data[0]),{status:"success",data:e.articlePublishAreaTree}):n})):Object(a.a)({status:"error",message:"管理用户未登录！"})}))},n.prototype.convertToAreaList=function(n){var e,l;if(Array.isArray(n.upperRegion)&&n.upperRegion.length)for(var t=0;t<n.upperRegion.length;t++)0==t?e=[n.upperRegion[t]]:l&&(l.children=[n.upperRegion[t]]),l=n.upperRegion[t];return n.areaId&&n.areaName&&n.areaLevel&&(l?l.children=[{areaName:n.areaName,areaId:n.areaId,areaLevel:n.areaLevel,children:n.lowerRegion||[]}]:e=[{areaName:n.areaName,areaId:n.areaId,areaLevel:n.areaLevel,children:n.lowerRegion||[]}]),n.id&&n.text&&n.level&&(this.formatAreaTree=[],e=[{areaName:n.text,areaId:n.id,areaLevel:n.level,children:this.formatAreaList(n)}]),e},n.prototype.getChildrenAreaTreeByAreaId=function(n,e){var l;if(n)for(var t=0;t<n.length;t++)if(l=n[t].areaId===e?n[t].children:this.getChildrenAreaTreeByAreaId(n[t].children,e))return l;return l},n.prototype.formatAreaList=function(n,e){var l=this;return void 0===e&&(e=this.formatAreaTree),Array.isArray(n.children)&&n.children.length&&n.children.forEach(function(n,t){e.push({areaId:n.id,areaName:n.text,areaLevel:n.level,children:[]}),l.formatAreaList(n,e[t].children)}),this.formatAreaTree},n.ngInjectableDef=s["ɵɵdefineInjectable"]({factory:function(){return new n(s["ɵɵinject"](t.a),s["ɵɵinject"](r.a),s["ɵɵinject"](o.a))},token:n,providedIn:"root"}),n}()},YBzL:function(n,e,l){"use strict";l.d(e,"a",function(){return t});var t=function(){return function(){}}()},"h+6d":function(n,e,l){"use strict";l.d(e,"a",function(){return t});var t=function(){function n(){}return n.prototype.transform=function(n,e){if(void 0===e&&(e=" "),!n)return n;var l=n.trim().split(e);return l[l.length-1]},n}()},r7hO:function(n,e,l){"use strict";l.d(e,"a",function(){return a}),l("h1wG"),l("wvhG");var t=l("fCh1"),a=function(){function n(n,e,l,t,a){this.normalUserService=n,this.router=e,this.entryHeaderService=l,this.logger=t,this.nativeBridgeService=a,this.pageName=""}return n.prototype.ngOnInit=function(){var n=this;this.entryHeaderService.getVillageCount().subscribe(function(e){"success"===e.status&&(n.villageCount=e.data)},function(n){})},n.prototype.switchLocation=function(){this.router.navigate(["/standard/switch-location",{page:this.pageName}])},n.prototype.scan=function(){this.nativeBridgeService.invoke({method:t.b.METHOD_SCAN})},n}()},s0BX:function(n,e,l){"use strict";l.d(e,"a",function(){return a});var t=[{name:"待审核",value:0},{name:"通过",value:1},{name:"不通过",value:2}],a=function(){function n(n){this.logger=n}return n.prototype.transform=function(e){for(var l=[],a=1;a<arguments.length;a++)l[a-1]=arguments[a];var i=t.find(function(n){return null!=e&&n.value.toString()==e});return i?i.name:(this.logger.warn(n.TAG+" SHARE_STATUS don't contains status("+e+")"),"")},n.TAG="ShareStatusPipe",n}()},sq0T:function(n,e,l){"use strict";var t=l("CcnG"),a=l("Ip0R"),i=l("MKJQ"),u=l("jy/b"),r=l("h+6d");l("r7hO"),l("h1wG"),l("ZYCi"),l("wvhG"),l("U3FM"),l("fCh1"),l.d(e,"a",function(){return o}),l.d(e,"b",function(){return p});var o=t["ɵcrt"]({encapsulation:0,styles:[[".header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 8px}.header[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-shrink:0}.header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 10px;flex:1;overflow:hidden}.user[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{font-size:18px;color:#fff9b3;display:flex;align-items:center;white-space:nowrap}.user[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis}.user[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-left:8px}.user[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:12px}.village-count[_ngcontent-%COMP%]{flex-shrink:0}.village-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0 3px;color:#fff9b3;font-style:normal}"]],data:{}});function s(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["ɵted"](1,null,[" "," "])),t["ɵppd"](2,1)],null,function(n,e){var l=e.component,a=t["ɵunv"](e,1,0,n(e,2,0,t["ɵnov"](e.parent.parent,0),l.normalUserService.selectedBelongsArea.userSelectAreaName||l.normalUserService.selectedBelongsArea.areaName));n(e,1,0,a)})}function c(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["ɵted"](1,null,[" "," "])),t["ɵppd"](2,1)],null,function(n,e){var l=e.component,a=t["ɵunv"](e,1,0,n(e,2,0,t["ɵnov"](e.parent.parent,0),l.normalUserService.selectedPublicArea.name));n(e,1,0,a)})}function d(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,13,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["当前位置"])),(n()(),t["ɵeld"](3,0,null,null,10,"div",[["class","user"]],null,null,null,null,null)),(n()(),t["ɵeld"](4,0,null,null,7,"span",[["class","location"],["tappable",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.switchLocation()&&t),t},null,null)),(n()(),t["ɵeld"](5,0,null,null,4,"div",[["class","area"]],null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,s)),t["ɵdid"](7,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,c)),t["ɵdid"](9,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](10,0,null,null,1,"ion-icon",[["name","chevron-down-outline"]],null,null,null,i.vb,i.u)),t["ɵdid"](11,49152,null,0,u.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(n()(),t["ɵeld"](12,0,null,null,1,"span",[["class","role"]],null,null,null,null,null)),(n()(),t["ɵted"](13,null,["",""]))],function(n,e){var l=e.component;n(e,7,0,"belongs"===l.normalUserService.mode&&l.normalUserService.selectedBelongsArea),n(e,9,0,"public"===l.normalUserService.mode&&l.normalUserService.selectedPublicArea),n(e,11,0,"chevron-down-outline")},function(n,e){var l=e.component;n(e,13,0,null==l.normalUserService.user?null:l.normalUserService.user.role)})}function g(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["当前位置"])),(n()(),t["ɵeld"](3,0,null,null,2,"div",[["class","user"]],null,null,null,null,null)),(n()(),t["ɵeld"](4,0,null,null,1,"ion-spinner",[["name","dots"]],null,null,null,i.Wb,i.V)),t["ɵdid"](5,49152,null,0,u.qb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null)],function(n,e){n(e,5,0,"dots")},null)}function p(n){return t["ɵvid"](0,[t["ɵpid"](0,r.a,[]),(n()(),t["ɵeld"](1,0,null,null,16,"ion-header",[],null,null,null,i.ub,i.t)),t["ɵdid"](2,49152,null,0,u.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](3,0,null,0,14,"ion-toolbar",[],null,null,null,i.bc,i.ab)),t["ɵdid"](4,49152,null,0,u.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](5,0,null,0,12,"div",[["class","header"]],null,null,null,null,null)),(n()(),t["ɵeld"](6,0,null,null,9,"div",[["class","main"]],null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,d)),t["ɵdid"](8,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,g)),t["ɵdid"](10,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](11,0,null,null,4,"span",[["class","village-count"]],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["村庄数"])),(n()(),t["ɵeld"](13,0,null,null,1,"i",[],null,null,null,null,null)),(n()(),t["ɵted"](14,null,["",""])),(n()(),t["ɵted"](-1,null,["个"])),(n()(),t["ɵeld"](16,0,null,null,1,"ion-icon",[["src","assets/icons/scan.svg"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.scan()&&t),t},i.vb,i.u)),t["ɵdid"](17,49152,null,0,u.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{src:[0,"src"]},null)],function(n,e){var l=e.component;n(e,8,0,null==l.normalUserService?null:l.normalUserService.mode),n(e,10,0,!(null!=l.normalUserService&&l.normalUserService.mode)),n(e,17,0,"assets/icons/scan.svg")},function(n,e){n(e,14,0,e.component.villageCount)})}},utMG:function(n,e,l){"use strict";l.d(e,"a",function(){return t});var t=function(){return function(){}}()},wvhG:function(n,e,l){"use strict";l.d(e,"a",function(){return s});var t=l("F/XL"),a=l("67Y/"),i=l("9Z1F"),u=l("CcnG"),r=l("MsM3"),o=l("U3FM"),s=function(){function n(n,e){this.aumsApi=n,this.logger=e}return n.prototype.getVillageCount=function(){var e=this;return this.aumsApi.getAreaList({actionType:"countAreaByLevel",level:6}).pipe(Object(a.a)(function(l){var t=l.data&&l.data.cnt;return t?{status:"success",data:t}:0===t?(e.logger.warn(n.TAG+" getVillageCount() 接口获取村庄数为0: "+JSON.stringify(l.data)),e.logger.warn(n.TAG+" getVillageCount() 接口请求地址: "+l.url),{status:"empty"}):(e.logger.warn(n.TAG+" getVillageCount() 接口返回不正确: "+JSON.stringify(l.data)),e.logger.warn(n.TAG+" getVillageCount() 接口请求地址: "+l.url),{status:"error",message:l.data&&l.data.message})}),Object(i.a)(function(l){return e.logger.error(n.TAG+" getVillageCount() 接口请求报错: "+l.message),e.logger.error(n.TAG+" getVillageCount() 接口请求地址: "+l.url),Object(t.a)({status:l.status,message:l.message})}))},n.TAG="EntryHeaderService",n.ngInjectableDef=u["ɵɵdefineInjectable"]({factory:function(){return new n(u["ɵɵinject"](r.b),u["ɵɵinject"](o.b))},token:n,providedIn:"root"}),n}()},zi6J:function(n,e,l){"use strict";l.d(e,"a",function(){return t});var t=function(){return function(){}}()}}]);