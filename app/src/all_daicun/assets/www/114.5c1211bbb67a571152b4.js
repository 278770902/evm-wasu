(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{"/7xp":function(n,e,l){"use strict";l.d(e,"a",function(){return t});var t=function(){return function(){}}()},CYnb:function(n,e,l){"use strict";var t=l("CcnG"),i=l("MKJQ"),u=l("jy/b"),o=l("Ip0R"),s=function(){function n(){this.status="inactive",this.refetch=new t.EventEmitter}return n.prototype.ngOnInit=function(){},n.prototype.onRefetch=function(){this.refetch.emit()},n}(),a=t["ɵcrt"]({encapsulation:0,styles:[[".infinite-content[_ngcontent-%COMP%]{height:42px;display:flex;justify-content:center;align-items:center;font-size:12px;color:var(--text-color-secondary)}.infinite-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-right:5px}.infinite-content[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]{position:relative;overflow:hidden}.infinite-content[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;left:-36px;top:-9px;width:154px;height:34px;background:linear-gradient(to right,rgba(255,255,255,.45) 0,rgba(255,255,255,.75) 5%,rgba(255,255,255,.45) 10%,transparent 10%,transparent 100%);background-size:154px 34px;-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:shimmer;animation-name:shimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;transform:rotate(15deg)}@-webkit-keyframes shimmer{0%{background-position:-154px 0}100%{background-position:154px 0}}@keyframes shimmer{0%{background-position:-154px 0}100%{background-position:154px 0}}"]],data:{}});function r(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,3,"div",[["class","loading-box"]],null,null,null,null,null)),(n()(),t["ɵeld"](2,0,null,null,0,"div",[["class","mask"]],null,null,null,null,null)),(n()(),t["ɵeld"](3,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["正在努力加载"]))],null,null)}function c(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["加载成功"]))],null,null)}function d(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["没有更多了"]))],null,null)}function h(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,1,"span",[],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.onRefetch()&&t),t},null,null)),(n()(),t["ɵted"](-1,null,["加载失败，请点击刷新"]))],null,null)}function f(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,10,"div",[["class","infinite-content"]],null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,9,null,null,null,null,null,null,null)),t["ɵdid"](2,16384,null,0,o.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,r)),t["ɵdid"](4,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,c)),t["ɵdid"](6,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,d)),t["ɵdid"](8,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,h)),t["ɵdid"](10,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,e){n(e,2,0,e.component.status),n(e,4,0,"loading"),n(e,6,0,"success"),n(e,8,0,"empty"),n(e,10,0,"error")},null)}l("ucSS"),l("U3FM"),l.d(e,"a",function(){return p}),l.d(e,"b",function(){return m});var p=t["ɵcrt"]({encapsulation:0,styles:[[""]],data:{}});function m(n){return t["ɵvid"](0,[t["ɵqud"](671088640,1,{infiniteScroll:0}),(n()(),t["ɵeld"](1,0,null,null,3,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(n,e,l){var t=!0;return"ionInfinite"===e&&(t=!1!==n.component.doInfinite(l)&&t),t},i.yb,i.w)),t["ɵdid"](2,49152,[[1,4]],0,u.F,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{threshold:[0,"threshold"]},null),(n()(),t["ɵeld"](3,0,null,0,1,"app-custom-infinite-scroll-content",[],null,[[null,"refetch"]],function(n,e,l){var t=!0;return"refetch"===e&&(t=!1!==n.component.doInfinite()&&t),t},f,a)),t["ɵdid"](4,114688,null,0,s,[],{status:[0,"status"]},{refetch:"refetch"})],function(n,e){var l=e.component;n(e,2,0,l.threshold),n(e,4,0,l.status)},null)}},gUVu:function(n,e){},ucSS:function(n,e,l){"use strict";l.d(e,"a",function(){return i});var t=l("CcnG"),i=function(){function n(n){this.logger=n,this.ionInfinite=new t.EventEmitter,this.threshold="10px",this.actions=[]}return n.prototype.ngOnInit=function(){},n.prototype.ngOnChanges=function(e){if(e.status&&e.status.currentValue!==e.status.previousValue)switch(this.logger.debug(n.TAG+" ngOnChanges() currentValue: "+e.status.currentValue),e.status.currentValue){case"success":case"empty":case"error":this.complete();break;case"inactive":this.disable();break;case"active":this.enable()}},n.prototype.ngAfterViewInit=function(){var n=this;this.actions.forEach(function(e){e.bind(n)()})},n.prototype.doInfinite=function(e){this.logger.debug(n.TAG+" doInfinite() event: "+JSON.stringify(e)),this.ionInfinite.emit(e)},n.prototype.complete=function(){this.infiniteScroll?this.infiniteScroll.complete():this.actions.push(this.complete)},n.prototype.disable=function(){this.infiniteScroll?this.infiniteScroll.disabled=!0:this.actions.push(this.disable)},n.prototype.enable=function(){this.infiniteScroll?this.infiniteScroll.disabled=!1:this.actions.push(this.enable)},n.TAG="CustomInfiniteScrollComponent",n}()},ujZz:function(n,e,l){"use strict";l.r(e);var t=l("CcnG"),i=l("atIC"),u=l("xzkB"),o=l("riri"),s=function(){function n(n,e){this.vrms=n,this.umsService=e}return n.prototype.searchByKey=function(n,e,l){return void 0===e&&(e=1),void 0===l&&(l=10),this.vrms.searchByKey({key:n,curPage:e,pageSize:l})},n.prototype.getCoursePlayUrl=function(n){return this.vrms.getMediaDetail({videoGuid:n})},n.TAG="SearchByKeyService",n}(),a=(l("gUVu"),l("fCh1")),r=l("ucSS"),c=l("PsQe"),d=l("B0rH"),h=(l("1FC6"),l("+SBZ")),f=l("/BJd"),p=function(){function n(n,e,l,t,i,u,o,s){this.app=n,this.searchByKeyService=e,this.nativeBridge=l,this.classListService=t,this.utilsService=i,this.umsUserService=u,this.logger=o,this.edumsService=s,this.cName="课程搜索",this.warningTips="",this.curPage=1,this.pageSize=15,this.searchResTips="",this.infiniteScrollStatus="inactive"}return n.prototype.ngOnInit=function(){this.initPlayVideoPower()},n.prototype.ionViewDidEnter=function(){this.appChannelSubscription=this.app.appChannel.subscribe(function(n){})},n.prototype.ngOnDestroy=function(){this.appChannelSubscription.unsubscribe(),this.classListService.toastCtr.dismiss()},n.prototype.searchByKey=function(n,e){var l=this,t=e?this.keyWords:n.target.value.trim();if(!t)return this.warningTips="关键字不能为空！",this.searchResTips="",this.searchResList=[],this.keyWords="",void(this.infiniteScrollStatus="inactive");this.keyWords&&this.keyWords===t&&!e||(e||(this.keyWords=t,this.curPage=1,this.infiniteScrollStatus="active"),/\W+?/g.test(t)&&!e?(this.warningTips="关键字不能包含汉字或特殊符号！",this.searchResList=[],this.searchResTips=""):(e||(this.warningTips="",this.searchResTips=""),this.searchByKeyService.searchByKey(t,this.curPage,this.pageSize).subscribe(function(n){"success"===n.status?(l.searchResList=e?l.searchResList.concat(n.data):n.data,l.infiniteScrollStatus="success",(n.data.length<l.pageSize||l.searchResList.length===+l.searchResList[0].mediaCount)&&(l.infiniteScrollStatus="empty")):"empty"===n.status?e?l.infiniteScrollStatus="empty":(l.searchResTips="抱歉，没有相关课程！",l.searchResList=[],l.infiniteScrollStatus="inactive"):e?l.infiniteScrollStatus="empty":(l.searchResTips="请求出错，请稍后重试！",l.searchResList=[],l.infiniteScrollStatus="inactive")})))},n.prototype.searchBlur=function(n){n.target.value.trim()||(this.warningTips="",this.searchResList=[],this.searchResTips="",this.keyWords="",this.infiniteScrollStatus="inactive")},n.prototype.trackByFun=function(n,e){return n},n.prototype.playVideo=function(n){var e=this;if(this.edumsService.isLogined())this.classListService.havePlayVideoPower?this.searchByKeyService.getCoursePlayUrl(n.GUID).subscribe(function(n){if("success"===n.status){var l=n.data;e.nativeBridge.invoke({method:a.b.METHOD_PLAY_VIDEO},l.playurl,l.mediaName,l.guid,"搜索",null)}else e.utilsService.toast("fail","获取播放地址失败！")}):this.utilsService.toast("fail","未订购教育产品或已到期！订购或详情咨询，请拨打全州统一客服电话96599");else{var l=this.nativeBridge.invoke({method:a.b.METHOD_UMS_USER_ID});l?(this.edumsService.initUserInfo(l),setTimeout(function(){e.initPlayVideoPower(),setTimeout(function(){e.classListService.havePlayVideoPower?e.searchByKeyService.getCoursePlayUrl(n.GUID).subscribe(function(l){"success"===l.status?e.nativeBridge.invoke({method:a.b.METHOD_PLAY_VIDEO},l.data.playurl,n.mediaName,n.id,"搜索",null,e.edumsService.userInfo.stbno):e.utilsService.toast("fail","获取播放地址失败！")}):e.utilsService.toast("fail","未订购教育产品或已到期！订购或详情咨询，请拨打全州统一客服电话96599")},500)},500)):this.classListService.presentAlert("未登录！","是否跳转登录？",function(){e.nativeBridge.invoke({method:a.b.METHOD_LOGIN_INTERFACE})})}},n.prototype.doInfinite=function(n){"inactive"!==this.infiniteScrollStatus&&"empty"!==this.infiniteScrollStatus?(this.infiniteScrollStatus="loading",this.curPage++,this.searchByKey(null,!0)):this.infiniteScroll.complete()},n.prototype.initPlayVideoPower=function(){var n=this,e=this.edumsService.userInfo&&this.edumsService.userInfo.id||this.nativeBridge.invoke({method:a.b.METHOD_UMS_USER_ID});this.edumsService.isLogined()?this.edumsService.boosCheckPhone({phone:this.edumsService.userInfo.phone}).subscribe(function(e){n.classListService.havePlayVideoPower="success"===e.status&&+e.data.overday>0},function(e){n.classListService.havePlayVideoPower=!1}):e?(this.edumsService.initUserInfo(e),this.edumsService.getStuById(e).subscribe(function(e){"success"===e.status?n.edumsService.boosCheckPhone({phone:e.data.phone}).subscribe(function(e){n.classListService.havePlayVideoPower="success"===e.status&&+e.data.overday>0},function(e){n.classListService.havePlayVideoPower=!1}):n.classListService.havePlayVideoPower=!1},function(e){n.classListService.havePlayVideoPower=!1})):this.classListService.havePlayVideoPower=!1},n.TAG="SearchByKeyComponent",n}(),m=function(){return function(){}}(),g=l("pMnS"),v=l("MKJQ"),y=l("jy/b"),b=l("Ip0R"),S=l("gIcY"),C=l("CYnb"),R=l("U3FM"),w=l("8hB0"),k=l("1YJt"),P=t["ɵcrt"]({encapsulation:0,styles:[[".searchbar-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f34039;text-align:center}.search-res-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{line-height:36px}.search-res-list[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:14%;background:url(icon.67628b6e6c020163e17b.png) left center/13% no-repeat padding-box}.searchRes-tips[_ngcontent-%COMP%]{text-align:center;line-height:30px;font-size:16px;font-weight:700;color:#999}"]],data:{}});function I(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,4,"ion-item",[],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.playVideo(n.context.$implicit)&&t),t},v.Db,v.z)),t["ɵdid"](1,49152,null,0,y.I,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](2,0,null,0,2,"ion-label",[],null,null,null,v.Eb,v.D)),t["ɵdid"](3,49152,null,0,y.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](4,0,[" "," "]))],null,function(n,e){n(e,4,0,e.context.$implicit.mediaName)})}function N(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,3,"ion-list",[["class","search-res-list"]],null,null,null,v.Gb,v.E)),t["ɵdid"](1,49152,null,0,y.P,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,I)),t["ɵdid"](3,278528,null,0,b.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(n,e){var l=e.component;n(e,3,0,l.searchResList,l.trackByFun)},null)}function E(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"p",[["class","searchRes-tips"]],null,null,null,null,null)),(n()(),t["ɵted"](1,null,[" "," "]))],null,function(n,e){n(e,1,0,e.component.searchResTips)})}function O(n){return t["ɵvid"](0,[t["ɵqud"](671088640,1,{infiniteScroll:0}),t["ɵqud"](671088640,2,{ionContent:0}),(n()(),t["ɵeld"](2,0,null,null,10,"ion-header",[],null,null,null,v.ub,v.t)),t["ɵdid"](3,49152,null,0,y.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](4,0,null,0,8,"ion-toolbar",[["mode","ios"]],null,null,null,v.bc,v.ab)),t["ɵdid"](5,49152,null,0,y.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"]},null),(n()(),t["ɵeld"](6,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,v.gb,v.f)),t["ɵdid"](7,49152,null,0,y.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](8,0,null,0,1,"ion-icon",[["name","chevron-back-outline"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.app.back()&&t),t},v.vb,v.u)),t["ɵdid"](9,49152,null,0,y.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(n()(),t["ɵeld"](10,0,null,0,2,"ion-title",[],null,null,null,v.Zb,v.Y)),t["ɵdid"](11,49152,null,0,y.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](12,0,[" "," "])),(n()(),t["ɵeld"](13,0,null,null,16,"ion-content",[],null,null,null,v.ob,v.n)),t["ɵdid"](14,49152,[[2,4]],0,y.v,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](15,0,null,0,12,"div",[["class","search-by-key-wrap"]],null,null,null,null,null)),(n()(),t["ɵeld"](16,0,null,null,6,"div",[["class","searchbar-wrap"]],null,null,null,null,null)),(n()(),t["ɵeld"](17,0,null,null,3,"ion-searchbar",[["animated",""],["debounce","500"],["mode","ios"],["placeholder","请输入关键词，字母或数字"]],null,[[null,"ionChange"],[null,"ionBlur"]],function(n,e,l){var i=!0,u=n.component;return"ionBlur"===e&&(i=!1!==t["ɵnov"](n,20)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t["ɵnov"](n,20)._handleInputEvent(l.target)&&i),"ionChange"===e&&(i=!1!==u.searchByKey(l)&&i),"ionBlur"===e&&(i=!1!==u.searchBlur(l)&&i),i},v.Pb,v.O)),t["ɵprd"](5120,null,S.m,function(n){return[n]},[y.Mb]),t["ɵdid"](19,49152,null,0,y.ib,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{animated:[0,"animated"],debounce:[1,"debounce"],mode:[2,"mode"],placeholder:[3,"placeholder"]},null),t["ɵdid"](20,16384,null,0,y.Mb,[t.ElementRef],null,null),(n()(),t["ɵeld"](21,0,null,null,1,"p",[["class","warning-tips"]],null,null,null,null,null)),(n()(),t["ɵted"](22,null,[" "," "])),(n()(),t["ɵand"](16777216,null,null,1,null,N)),t["ɵdid"](24,16384,null,0,b.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["ɵand"](0,[["emptyTemp",2]],null,0,null,E)),(n()(),t["ɵeld"](26,0,null,null,1,"app-custom-infinite-scroll",[],null,[[null,"ionInfinite"]],function(n,e,l){var t=!0;return"ionInfinite"===e&&(t=!1!==n.component.doInfinite(l)&&t),t},C.b,C.a)),t["ɵdid"](27,4833280,[[1,4]],0,r.a,[R.b],{status:[0,"status"]},{ionInfinite:"ionInfinite"}),(n()(),t["ɵeld"](28,0,null,0,1,"app-go-top",[],null,null,null,w.b,w.a)),t["ɵdid"](29,573440,null,0,k.a,[],{ionContent:[0,"ionContent"]},null)],function(n,e){var l=e.component;n(e,5,0,"ios"),n(e,9,0,"chevron-back-outline"),n(e,19,0,"","500","ios","请输入关键词，字母或数字"),n(e,24,0,null==l.searchResList?null:l.searchResList.length,t["ɵnov"](e,25)),n(e,27,0,l.infiniteScrollStatus),n(e,29,0,l.ionContent)},function(n,e){var l=e.component;n(e,12,0,l.cName),n(e,22,0,l.warningTips)})}function T(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-search-by-key",[],null,null,null,O,P)),t["ɵdid"](1,245760,null,0,p,[i.a,s,a.b,c.a,d.a,h.a,R.b,f.a],null,null)],function(n,e){n(e,1,0)},null)}var B=t["ɵccf"]("app-search-by-key",p,T,{},{},[]),M=l("t/Na"),L=l("yH+W"),_=l("/7xp"),x=l("MxW3"),V=l("ZYCi");l.d(e,"SearchByKeyComponentModuleNgFactory",function(){return D});var D=t["ɵcmf"](m,[],function(n){return t["ɵmod"]([t["ɵmpd"](512,t.ComponentFactoryResolver,t["ɵCodegenComponentFactoryResolver"],[[8,[g.a,B]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["ɵmpd"](4608,b.NgLocalization,b.NgLocaleLocalization,[t.LOCALE_ID,[2,b["ɵangular_packages_common_common_a"]]]),t["ɵmpd"](4608,S.y,S.y,[]),t["ɵmpd"](4608,y.c,y.c,[t.NgZone,t.ApplicationRef]),t["ɵmpd"](4608,y.Fb,y.Fb,[y.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,y.Jb,y.Jb,[y.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,s,s,[u.a,o.a]),t["ɵmpd"](4608,c.a,c.a,[M.c,R.b,o.a,y.Nb,f.a]),t["ɵmpd"](1073742336,b.CommonModule,b.CommonModule,[]),t["ɵmpd"](1073742336,S.x,S.x,[]),t["ɵmpd"](1073742336,S.i,S.i,[]),t["ɵmpd"](1073742336,y.Cb,y.Cb,[]),t["ɵmpd"](1073742336,L.a,L.a,[]),t["ɵmpd"](1073742336,_.a,_.a,[]),t["ɵmpd"](1073742336,x.a,x.a,[]),t["ɵmpd"](1073742336,V.n,V.n,[[2,V.s],[2,V.m]]),t["ɵmpd"](1073742336,m,m,[]),t["ɵmpd"](1024,V.k,function(){return[[{path:"",component:p}]]},[])])})},"yH+W":function(n,e,l){"use strict";l.d(e,"a",function(){return t});var t=function(){return function(){}}()}}]);