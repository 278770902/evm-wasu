(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"57in":function(n,l,e){"use strict";e.d(l,"a",function(){return a}),e.d(l,"b",function(){return f});var t=e("CcnG"),u=(e("xvo6"),e("Ip0R")),o=(e("gIcY"),e("PqVL")),i=e("prAe"),a=t["ɵcrt"]({encapsulation:0,styles:["[_nghost-%COMP%]{display:flex;height:100%}.inactive[_nghost-%COMP%], .success[_nghost-%COMP%]{display:none}.page-tip[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;color:rgba(0,0,0,.5)}.page-tip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40%}.page-tip[_ngcontent-%COMP%]   .am-button[_ngcontent-%COMP%]{margin-top:5px}"],data:{}});function r(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,2,"Icon",[],null,null,null,i.q,i.i)),t["ɵprd"](512,null,o.Oc,o.Oc,[]),t["ɵdid"](3,49152,null,0,o.bb,[o.Oc],{type:[0,"type"]},null)],function(n,l){n(l,3,0,"loading")},null)}function c(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,1,0,l.component.icon)})}function s(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,"div",[["Button",""]],null,[[null,"click"],[null,"touchstart"],[null,"mousedown"],[null,"touchend"],[null,"mouseup"],[null,"touchmove"],[null,"mousemove"],[null,"touchcancel"]],function(n,l,e){var u=!0,o=n.component;return"touchstart"===l&&(u=!1!==t["ɵnov"](n,1).touchStart(e)&&u),"mousedown"===l&&(u=!1!==t["ɵnov"](n,1).touchStart(e)&&u),"touchend"===l&&(u=!1!==t["ɵnov"](n,1).touchEnd(e)&&u),"mouseup"===l&&(u=!1!==t["ɵnov"](n,1).touchEnd(e)&&u),"touchmove"===l&&(u=!1!==t["ɵnov"](n,1).touchEnd(e)&&u),"mousemove"===l&&(u=!1!==t["ɵnov"](n,1).touchEnd(e)&&u),"touchcancel"===l&&(u=!1!==t["ɵnov"](n,1).touchEnd(e)&&u),"click"===l&&(u=!1!==t["ɵnov"](n,1).click(e)&&u),"click"===l&&(u=!1!==o.onRefresh()&&u),u},i.o,i.g)),t["ɵdid"](1,4243456,null,0,o.o,[t.ElementRef,t.Renderer2],{type:[0,"type"],size:[1,"size"]},null),(n()(),t["ɵted"](-1,1,[" 点击刷新 "]))],function(n,l){n(l,1,0,"primary","small")},null)}function d(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,s)),t["ɵdid"](2,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵand"](0,null,null,0))],function(n,l){n(l,2,0,l.component.showRefresh)},null)}function p(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,10,"div",[["class","page-tip"]],null,null,null,null,null)),(n()(),t["ɵand"](16777216,null,null,1,null,r)),t["ɵdid"](2,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵand"](16777216,null,null,1,null,c)),t["ɵdid"](4,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t["ɵted"](6,null,["",""])),(n()(),t["ɵeld"](7,0,[["custom",1]],null,1,"div",[],null,null,null,null,null)),t["ɵncd"](null,0),(n()(),t["ɵand"](16777216,null,null,1,null,d)),t["ɵdid"](10,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,"loading"===(null==e.payload?null:e.payload.status)),n(l,4,0,"loading"!==(null==e.payload?null:e.payload.status)),n(l,10,0,0==t["ɵnov"](l,7).childNodes.length)},function(n,l){n(l,6,0,l.component.message)})}function f(n){return t["ɵvid"](0,[(n()(),t["ɵand"](16777216,null,null,1,null,p)),t["ɵdid"](1,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,l.component.show)},null)}},pzfr:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=e("mrSG"),o=e("atIC"),i=e("t/Na"),a=e("3U0i"),r=e("XlPw"),c=e("F/XL"),s=e("15JJ"),d=e("0zd0"),p=e("9Z1F"),f=function(){function n(n,l,e){this.app=n,this.logger=l,this.http=e}return Object.defineProperty(n.prototype,"apiEndPoint",{get:function(){return this.app.appConfig.aums.apiEndPoint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return"easydms"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"timeout",{get:function(){return this.app.appConfig.aums.timeout},enumerable:!0,configurable:!0}),n.prototype.handleError=function(n,l){var e,t;return n instanceof a.a?(e="网络连接超时",t="timeout"):0===n.status?(e="没有网络连接，请检查网络设置",t="offline"):(e=n.message||"服务正忙，请稍后再试",t="error"),Object(r.a)({message:e,status:t,data:n,url:l})},n.prototype.getMonitorList=function(l,e,t){l.action=l.action?l.action:"apiRegionCodeGetIPCS",l.type=l.type?l.type:"single";var u=(e||this.apiEndPoint)+"/"+(t||this.path)+"/interface";this.logger.debug(n.TAG+" getMonitorList() request url is "+u);var o='param={"action":"'+l.action+'","data":{"region":"'+l.region+'","type":"'+l.type+'"},"mod":""}';this.logger.debug(n.TAG+" getMonitorList() request body is "+o);var a={headers:new i.h({"Content-Type":"application/x-www-form-urlencoded"})};return this.http.post(u,o,a).pipe(Object(s.a)(function(n){return Array.isArray(n.ipcs)&&n.ipcs.length?n.status="success":(n.status="empty",n.message="当前区域没有监控信息"),Object(c.a)({status:n.status,data:n.ipcs||[],message:n.message||""})}),Object(d.a)(this.timeout),Object(p.a)(function(n){return Object(c.a)({status:"error",message:n.message})}))},n.TAG="PublicMonitorService",n}(),m=e("h1wG"),g=e("+SBZ"),h=e("fCh1"),v=e("B0rH"),b=function(){function n(n,l,e,t,u,o,i,a){this.app=n,this.router=l,this.activatedRoute=e,this.publicMonitorService=t,this.normalUser=u,this.umsUser=o,this.nativeBridge=i,this.utils=a,this.cName=this.activatedRoute.snapshot.paramMap.get("name")}return n.prototype.ngOnInit=function(){this.pageInit()},n.prototype.pageInit=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(n){switch(n.label){case 0:return this.pageTipPayload={status:"loading"},this.umsUser.isLogined?[4,this.getMonitorList()]:(this.pageTipPayload={status:"success"},[2]);case 1:return n.sent(),[2]}})})},n.prototype.getMonitorList=function(){return u.__awaiter(this,void 0,void 0,function(){var n=this;return u.__generator(this,function(l){switch(l.label){case 0:return[4,this.publicMonitorService.getMonitorList({region:this.normalUser.user.areaId}).subscribe(function(l){"success"===l.status?(n.pageTipPayload={status:"success"},n.monitorList=l.data.map(function(n){return{FName:n.FName,liveIP:n.liveIP,liveRtspPort:n.liveRtspPort,GUID:n.GUID,name:n.name}})):n.pageTipPayload={status:"empty",message:"该区域没有监控信息"}},function(l){n.pageTipPayload={status:"error",message:l.message||"请求失败，请稍后重试"}})];case 1:return l.sent(),[2]}})})},n.prototype.playMonitor=function(n){n.liveIP&&n.liveRtspPort&&n.GUID?this.nativeBridge.invoke({method:h.b.METHOD_PLAY_MONITOR},"rtsp://"+n.liveIP+":"+n.liveRtspPort+"/"+n.GUID,this.cName):this.utils.toast("fail","打开监控失败！")},n.prototype.gotoLogin=function(){this.nativeBridge.invoke({method:h.b.METHOD_LOGIN})},n.prototype.doRefresh=function(n){var l=this;this.pageInit().finally(function(){n.target.complete(),l.utils.toast("success","刷新成功")})},n.TAG="PublicMonitorComponent",n}(),R=function(){return function(){}}(),y=e("pMnS"),C=e("MKJQ"),I=e("jy/b"),P=e("Ip0R"),M=e("57in"),N=e("xvo6"),O=e("ZYCi"),w=t["ɵcrt"]({encapsulation:0,styles:[["ion-label[_ngcontent-%COMP%]{text-indent:1rem}.login-wrap[_ngcontent-%COMP%]{margin-top:50%}.login-wrap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;margin-top:16px}"]],data:{}});function E(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,6,"ion-item",[["button",""],["detail",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.playMonitor(n.context.$implicit)&&t),t},C.Db,C.z)),t["ɵdid"](1,49152,null,0,I.I,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{button:[0,"button"],detail:[1,"detail"]},null),(n()(),t["ɵeld"](2,0,null,0,1,"ion-icon",[["name","videocam-outline"]],null,null,null,C.vb,C.u)),t["ɵdid"](3,49152,null,0,I.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(n()(),t["ɵeld"](4,0,null,0,2,"ion-label",[],null,null,null,C.Eb,C.D)),t["ɵdid"](5,49152,null,0,I.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](6,0,[" "," "]))],function(n,l){n(l,1,0,"",""),n(l,3,0,"videocam-outline")},function(n,l){n(l,6,0,l.context.$implicit.FName)})}function _(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,4,"div",[["class","monitor-list"]],null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,3,"ion-list",[],null,null,null,C.Gb,C.E)),t["ɵdid"](2,49152,null,0,I.P,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,E)),t["ɵdid"](4,278528,null,0,P.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,4,0,l.component.monitorList)},null)}function D(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,6,"div",[["class","login-wrap"]],null,null,null,null,null)),(n()(),t["ɵeld"](1,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,[" 当前您是游客状态，无法查看监控 "])),(n()(),t["ɵeld"](3,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),t["ɵeld"](4,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.gotoLogin()&&t),t},C.fb,C.e)),t["ɵdid"](5,49152,null,0,I.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,[" 去登录 "]))],null,null)}function L(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,10,"ion-header",[],null,null,null,C.ub,C.t)),t["ɵdid"](1,49152,null,0,I.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](2,0,null,0,8,"ion-toolbar",[["mode","ios"]],null,null,null,C.bc,C.ab)),t["ɵdid"](3,49152,null,0,I.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"]},null),(n()(),t["ɵeld"](4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,C.gb,C.f)),t["ɵdid"](5,49152,null,0,I.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](6,0,null,0,1,"ion-icon",[["name","chevron-back-outline"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.app.back()&&t),t},C.vb,C.u)),t["ɵdid"](7,49152,null,0,I.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(n()(),t["ɵeld"](8,0,null,0,2,"ion-title",[],null,null,null,C.Zb,C.Y)),t["ɵdid"](9,49152,null,0,I.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](10,0,[" "," "])),(n()(),t["ɵeld"](11,0,null,null,10,"ion-content",[],null,null,null,C.ob,C.n)),t["ɵdid"](12,49152,null,0,I.v,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](13,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],function(n,l,e){var t=!0;return"ionRefresh"===l&&(t=!1!==n.component.doRefresh(e)&&t),t},C.Mb,C.K)),t["ɵdid"](14,49152,null,0,I.bb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](15,0,null,0,1,"ion-refresher-content",[],null,null,null,C.Lb,C.L)),t["ɵdid"](16,49152,null,0,I.cb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,_)),t["ɵdid"](18,16384,null,0,P.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t["ɵand"](0,[["loginTip",2]],0,0,null,D)),(n()(),t["ɵeld"](20,0,null,0,1,"evm-page-tip",[],null,[[null,"refresh"]],function(n,l,e){var t=!0;return"refresh"===l&&(t=!1!==n.component.pageInit()&&t),t},M.b,M.a)),t["ɵdid"](21,638976,null,0,N.d,[t.ElementRef,t.Renderer2],{payload:[0,"payload"]},{refresh:"refresh"})],function(n,l){var e=l.component;n(l,3,0,"ios"),n(l,7,0,"chevron-back-outline"),n(l,18,0,e.umsUser.isLogined,t["ɵnov"](l,19)),n(l,21,0,e.pageTipPayload)},function(n,l){n(l,10,0,l.component.cName)})}function T(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-public-monitor",[],null,null,null,L,w)),t["ɵdid"](1,114688,null,0,b,[o.a,O.m,O.a,f,m.a,g.a,h.b,v.a],null,null)],function(n,l){n(l,1,0)},null)}var k=t["ɵccf"]("app-public-monitor",b,T,{},{},[]),Z=e("gIcY"),F=e("U3FM"),x=e("PqVL");e.d(l,"PublicMonitorComponentModuleNgFactory",function(){return G});var G=t["ɵcmf"](R,[],function(n){return t["ɵmod"]([t["ɵmpd"](512,t.ComponentFactoryResolver,t["ɵCodegenComponentFactoryResolver"],[[8,[y.a,k]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["ɵmpd"](4608,P.NgLocalization,P.NgLocaleLocalization,[t.LOCALE_ID,[2,P["ɵangular_packages_common_common_a"]]]),t["ɵmpd"](4608,Z.y,Z.y,[]),t["ɵmpd"](4608,I.c,I.c,[t.NgZone,t.ApplicationRef]),t["ɵmpd"](4608,I.Fb,I.Fb,[I.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,I.Jb,I.Jb,[I.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,f,f,[o.a,F.b,i.c]),t["ɵmpd"](1073742336,P.CommonModule,P.CommonModule,[]),t["ɵmpd"](1073742336,Z.x,Z.x,[]),t["ɵmpd"](1073742336,Z.i,Z.i,[]),t["ɵmpd"](1073742336,I.Cb,I.Cb,[]),t["ɵmpd"](1073742336,O.n,O.n,[[2,O.s],[2,O.m]]),t["ɵmpd"](1073742336,x.cb,x.cb,[]),t["ɵmpd"](1073742336,x.Mc,x.Mc,[]),t["ɵmpd"](1073742336,x.Kc,x.Kc,[]),t["ɵmpd"](1073742336,x.kb,x.kb,[]),t["ɵmpd"](1073742336,x.p,x.p,[]),t["ɵmpd"](1073742336,N.b,N.b,[]),t["ɵmpd"](1073742336,R,R,[]),t["ɵmpd"](1024,O.k,function(){return[[{path:"",component:b}]]},[])])})}}]);