(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{Kpk4:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=e("O0u2"),i=e("F/XL"),u=e("67Y/"),r=e("9Z1F"),a=e("atIC"),c=e("qSwL"),s=e("MsM3"),m=e("U3FM"),d=function(){function n(n,l,e,t,o){this.adminUserService=n,this.aumsApi=l,this.logger=e,this.app=t,this.adminManageableColumnsService=o}return n.prototype.getAdminAreaInfo=function(){var l=this,e=this.adminUserService.user&&this.adminUserService.user.areaId;return e?this.aumsApi.getAreaList({areaId:e}).pipe(Object(u.a)(function(e){var t=e&&e.data;return t&&t.areaName?{areaName:t.areaName,areaLevel:t.areaLevel}:(l.logger.warn(n.TAG+" getAdminAreaName() 未获取到区域信息"),l.logger.warn(n.TAG+" getAdminAreaName() 接口地址: "+e.url),l.logger.warn(n.TAG+" getAdminAreaName() 接口返回数据: "+JSON.stringify(e.data)),null)}),Object(r.a)(function(e){return l.logger.error(n.TAG+" getAdminAreaName() 报错: "+e.message),Object(i.a)(null)})):(this.logger.warn(n.TAG+" getAdminAreaName() 未获取到管理员登陆信息"),Object(i.a)(null))},n.prototype.getManageableColumns=function(){return this.adminManageableColumnsService.getManageableColumns()},n.prototype.getCommonColumns=function(){var l=this;return this.adminUserService.isLogined?this.aumsApi.getManyColumn({userid:this.adminUserService.user.id,websiteid:this.app.appConfig.aums.websiteId}).pipe(Object(u.a)(function(e){var t=e&&e.data&&e.data.laac;return Array.isArray(t)&&t.length?t:(l.logger.warn(n.TAG+" getCommonColumns() 未获取到可管理的重要栏目列表"),l.logger.warn(n.TAG+" getCommonColumns() 接口地址: "+e.url),l.logger.warn(n.TAG+" getCommonColumns() 接口返回数据: "+JSON.stringify(e.data)),null)}),Object(r.a)(function(e){return l.logger.error(n.TAG+" getCommonColumns() 报错: "+e.message),Object(i.a)(null)})):(this.logger.warn(n.TAG+" getCommonColumns() 未获取到管理用户信息"),Object(i.a)(null))},n.TAG="IndexService",n.ngInjectableDef=t["ɵɵdefineInjectable"]({factory:function(){return new n(t["ɵɵinject"](o.a),t["ɵɵinject"](s.b),t["ɵɵinject"](m.b),t["ɵɵinject"](a.a),t["ɵɵinject"](c.a))},token:n,providedIn:"root"}),n}(),g=e("lbwW"),p=function(){function n(n,l,e,t,o,i){this.app=n,this.indexService=l,this.toastService=e,this.router=t,this.adminUserService=o,this.aumsService=i,this.commonColumnList=[],this.manageableColumnList=[],this.tabIndex=0,this.tabDisabled=!0,this.isPowerIndependent=this.app.getFeatureConfig("isPowerIndependent")}return n.prototype.ngOnInit=function(){this.adminAreaName=this.adminUserService.user.areaName,this.userName=this.adminUserService.user.userName,this.tabIndex=5===this.adminUserService.user.areaLevel?1:0,this.getCommonColumnList(),this.getManageableColumnList()},n.prototype.ionViewWillEnter=function(){this.adminUserService.isLogined||this.router.navigate(["/admin/login",{backUrl:this.router.url}],{replaceUrl:!0})},n.prototype.onTabClick=function(n){var l=n;this.tabDisabled&&"本镇管理"===l&&0===this.tabIndex?this.toastService.info("您不是镇管理员!"):this.tabDisabled&&"本村管理"===l&&1===this.tabIndex&&this.toastService.info("您不是村管理员!")},n.prototype.buildColumnList=function(n){var l=this;return"common"===n?this.commonColumnList:"other"===n?this.manageableColumnList.filter(function(n){return!l.commonColumnList||!l.commonColumnList.length||!l.commonColumnList.some(function(l){return l.columnname===n.columnname})}):[]},n.prototype.openColumn=function(n){this.router.navigate("村民认证"===n.columnname?["admin/villager-check-center"]:["admin/article-edit-list",{columnName:n.columnname,columnId:n.columnid,websiteId:n.websiteId,editpower:this.isPowerIndependent?1:n.editpower,checkpower:this.isPowerIndependent?n.editpower:1,publishpower:n.publishpower,columnType:n.columntype}])},n.prototype.goUser=function(){this.router.navigate(["admin/user"])},n.prototype.getCommonColumnList=function(){var n=this;this.indexService.getCommonColumns().subscribe(function(l){n.commonColumnList=Array.isArray(l)&&l.length?l:[]})},n.prototype.getManageableColumnList=function(){var n=this;this.indexService.getManageableColumns().subscribe(function(l){n.manageableColumnList=Array.isArray(l)&&l.length?l:[]})},n}(),f=function(){return function(){}}(),b=e("pMnS"),C=e("MKJQ"),h=e("jy/b"),v=e("Ip0R"),R=e("PqVL"),N=e("ZYCi"),x=t["ɵcrt"]({encapsulation:0,styles:[[".current-area[_ngcontent-%COMP%]{padding:10px 16px}.segment[_ngcontent-%COMP%]{padding:10px 16px;display:flex;opacity:.5}.segment[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:center;color:#6b9e54;padding:8px 0;border:1px solid #6b9e54;border-radius:0 5px 5px 0}.segment[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{border-left-width:1px;border-radius:5px 0 0 5px;background-color:#6b9e54;color:#fff}.panel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:10px 15px 15px;font-weight:700;font-size:var(--font-size-sm)}ion-grid[_ngcontent-%COMP%]{padding:0 15px}.column-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-bottom:10px}.column-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:var(--font-size-xs)}.column-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px}"]],data:{}});function w(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"div",[["class","current-area"]],null,null,null,null,null)),(n()(),t["ɵted"](1,null,[" 当前位置："," "]))],null,function(n,l){n(l,1,0,l.component.adminAreaName)})}function A(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,6,"ion-col",[["size","3"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.openColumn(n.context.$implicit)&&t),t},C.nb,C.m)),t["ɵdid"](1,49152,null,0,h.u,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{size:[0,"size"]},null),(n()(),t["ɵeld"](2,0,null,0,4,"div",[["class","column-item"]],null,null,null,null,null)),(n()(),t["ɵeld"](3,0,null,null,1,"ion-icon",[["src","assets/icons/column-icon.svg"]],null,null,null,C.vb,C.u)),t["ɵdid"](4,49152,null,0,h.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{src:[0,"src"]},null),(n()(),t["ɵeld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["ɵted"](6,null,["",""]))],function(n,l){n(l,1,0,"3"),n(l,4,0,"assets/icons/column-icon.svg")},function(n,l){n(l,6,0,l.context.$implicit.columnname)})}function y(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,6,"ion-col",[["size","3"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.openColumn(n.context.$implicit)&&t),t},C.nb,C.m)),t["ɵdid"](1,49152,null,0,h.u,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{size:[0,"size"]},null),(n()(),t["ɵeld"](2,0,null,0,4,"div",[["class","column-item"]],null,null,null,null,null)),(n()(),t["ɵeld"](3,0,null,null,1,"ion-icon",[["src","assets/icons/column-icon.svg"]],null,null,null,C.vb,C.u)),t["ɵdid"](4,49152,null,0,h.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{src:[0,"src"]},null),(n()(),t["ɵeld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["ɵted"](6,null,["",""]))],function(n,l){n(l,1,0,"3"),n(l,4,0,"assets/icons/column-icon.svg")},function(n,l){n(l,6,0,l.context.$implicit.columnname)})}function O(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,14,"ion-header",[["class","ion-no-border"]],null,null,null,C.ub,C.t)),t["ɵdid"](1,49152,null,0,h.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](2,0,null,0,12,"ion-toolbar",[["mode","ios"]],null,null,null,C.bc,C.ab)),t["ɵdid"](3,49152,null,0,h.Ab,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"]},null),(n()(),t["ɵeld"](4,0,null,0,3,"ion-buttons",[["class","back"],["slot","start"]],null,null,null,C.gb,C.f)),t["ɵdid"](5,49152,null,0,h.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](6,0,null,0,1,"ion-icon",[["name","chevron-back-outline"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.app.back()&&t),t},C.vb,C.u)),t["ɵdid"](7,49152,null,0,h.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null),(n()(),t["ɵeld"](8,0,null,0,2,"ion-title",[],null,null,null,C.Zb,C.Y)),t["ɵdid"](9,49152,null,0,h.yb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,["我的管理"])),(n()(),t["ɵeld"](11,0,null,0,3,"ion-buttons",[["slot","end"]],null,null,null,C.gb,C.f)),t["ɵdid"](12,49152,null,0,h.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](13,0,null,0,1,"ion-icon",[["src","assets/icons/person.svg"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.goUser()&&t),t},C.vb,C.u)),t["ɵdid"](14,49152,null,0,h.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{src:[0,"src"]},null),(n()(),t["ɵeld"](15,0,null,null,25,"ion-content",[],null,null,null,C.ob,C.n)),t["ɵdid"](16,49152,null,0,h.v,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,w)),t["ɵdid"](18,16384,null,0,v.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["ɵeld"](19,0,null,0,4,"div",[["class","segment"]],null,null,null,null,null)),(n()(),t["ɵeld"](20,0,null,null,1,"span",[],[[2,"active",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onTabClick("本村管理")&&t),t},null,null)),(n()(),t["ɵted"](-1,null,["本村管理"])),(n()(),t["ɵeld"](22,0,null,null,1,"span",[],[[2,"active",null]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onTabClick("本镇管理")&&t),t},null,null)),(n()(),t["ɵted"](-1,null,["本镇管理"])),(n()(),t["ɵeld"](24,0,null,0,16,"div",[["class","panel"]],null,null,null,null,null)),(n()(),t["ɵeld"](25,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["常用栏目"])),(n()(),t["ɵeld"](27,0,null,null,5,"ion-grid",[],null,null,null,C.tb,C.s)),t["ɵdid"](28,49152,null,0,h.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](29,0,null,0,3,"ion-row",[],null,null,null,C.Ob,C.N)),t["ɵdid"](30,49152,null,0,h.hb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,A)),t["ɵdid"](32,278528,null,0,v.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["ɵeld"](33,0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(n()(),t["ɵted"](-1,null,["其他栏目"])),(n()(),t["ɵeld"](35,0,null,null,5,"ion-grid",[],null,null,null,C.tb,C.s)),t["ɵdid"](36,49152,null,0,h.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](37,0,null,0,3,"ion-row",[],null,null,null,C.Ob,C.N)),t["ɵdid"](38,49152,null,0,h.hb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵand"](16777216,null,0,1,null,y)),t["ɵdid"](40,278528,null,0,v.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,3,0,"ios"),n(l,7,0,"chevron-back-outline"),n(l,14,0,"assets/icons/person.svg"),n(l,18,0,e.adminAreaName),n(l,32,0,e.buildColumnList("common")),n(l,40,0,e.buildColumnList("other"))},function(n,l){var e=l.component;n(l,20,0,0===e.tabIndex),n(l,22,0,1===e.tabIndex)})}function I(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-index",[],null,null,null,O,x)),t["ɵdid"](1,114688,null,0,p,[a.a,d,R.Ic,N.m,o.a,g.a],null,null)],function(n,l){n(l,1,0)},null)}var M=t["ɵccf"]("app-index",p,I,{},{},[]);e.d(l,"IndexModuleNgFactory",function(){return L});var L=t["ɵcmf"](f,[],function(n){return t["ɵmod"]([t["ɵmpd"](512,t.ComponentFactoryResolver,t["ɵCodegenComponentFactoryResolver"],[[8,[b.a,M]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["ɵmpd"](4608,v.NgLocalization,v.NgLocaleLocalization,[t.LOCALE_ID,[2,v["ɵangular_packages_common_common_a"]]]),t["ɵmpd"](4608,h.c,h.c,[t.NgZone,t.ApplicationRef]),t["ɵmpd"](4608,h.Fb,h.Fb,[h.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,h.Jb,h.Jb,[h.c,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](1073742336,v.CommonModule,v.CommonModule,[]),t["ɵmpd"](1073742336,N.n,N.n,[[2,N.s],[2,N.m]]),t["ɵmpd"](1073742336,h.Cb,h.Cb,[]),t["ɵmpd"](1073742336,f,f,[]),t["ɵmpd"](1024,N.k,function(){return[[{path:"",component:p}]]},[])])})}}]);