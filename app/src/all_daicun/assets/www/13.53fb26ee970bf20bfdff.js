(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"0Huk":function(n,t,l){"use strict";l.d(t,"a",function(){return r});var e=l("lbwW"),i=l("F/XL"),u=l("15JJ"),a=l("67Y/"),o=l("CcnG"),r=function(){function n(n){this.aumsService=n}return n.prototype.fetchTotalCount=function(n){var t=this,l=n.favorTypeId,e=n.commentTypeId,o=n.viewTypeId,r=n.ids,c=n.userId;return Object(i.a)(null).pipe(Object(u.a)(function(n){return l?t.aumsService.getTotalCntByCIds({columnIds:r,typeId:l}).pipe(Object(a.a)(function(t){return"success"===t.status&&(n=t.data.map(function(n){return{id:n.columnId,favorCount:n.totalCnt}})),n})):Object(i.a)(n)}),Object(u.a)(function(n){return o?t.aumsService.getTotalCntByCIds({columnIds:r,typeId:o}).pipe(Object(a.a)(function(t){return"success"===t.status&&(n?n.forEach(function(n){var l=t.data.find(function(t){return t.columnId===n.id});l&&(n.viewCount=l.totalCnt)}):n=t.data.map(function(n){return{id:n.columnId,viewCount:n.totalCnt}})),n})):Object(i.a)(n)}),Object(u.a)(function(n){return e?t.aumsService.getObjectCommentCount({commentTypeIds:e.toString(),targetIds:r}).pipe(Object(a.a)(function(t){return"success"===t.status&&(n?n.forEach(function(n){var l=t.data.find(function(t){return t.targetId===n.id});l&&(n.commentCount=l.count)}):n=t.data.map(function(n){return{id:n.targetId,commentCount:n.count}})),n})):Object(i.a)(n)}),Object(u.a)(function(n){return c?t.aumsService.getVoteUserCollect({columnIds:r,typeId:l,userId:c}).pipe(Object(a.a)(function(t){return"success"===t.status&&(n?n.forEach(function(n){t.data.find(function(t){return t.columnId===n.id})&&(n.isFavor=!0)}):n=t.data.map(function(n){return{id:n.columnId,isFavor:!0}})),n})):Object(i.a)(n)}))},n.ngInjectableDef=o["ɵɵdefineInjectable"]({factory:function(){return new n(o["ɵɵinject"](e.a))},token:n,providedIn:"root"}),n}()},"57in":function(n,t,l){"use strict";l.d(t,"a",function(){return o}),l.d(t,"b",function(){return f});var e=l("CcnG"),i=(l("xvo6"),l("Ip0R")),u=(l("gIcY"),l("PqVL")),a=l("prAe"),o=e["ɵcrt"]({encapsulation:0,styles:["[_nghost-%COMP%]{display:flex;height:100%}.inactive[_nghost-%COMP%], .success[_nghost-%COMP%]{display:none}.page-tip[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;color:rgba(0,0,0,.5)}.page-tip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40%}.page-tip[_ngcontent-%COMP%]   .am-button[_ngcontent-%COMP%]{margin-top:5px}"],data:{}});function r(n){return e["ɵvid"](0,[(n()(),e["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),e["ɵeld"](1,0,null,null,2,"Icon",[],null,null,null,a.q,a.i)),e["ɵprd"](512,null,u.Oc,u.Oc,[]),e["ɵdid"](3,49152,null,0,u.bb,[u.Oc],{type:[0,"type"]},null)],function(n,t){n(t,3,0,"loading")},null)}function c(n){return e["ɵvid"](0,[(n()(),e["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),e["ɵeld"](1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,t){n(t,1,0,t.component.icon)})}function s(n){return e["ɵvid"](0,[(n()(),e["ɵeld"](0,0,null,null,2,"div",[["Button",""]],null,[[null,"click"],[null,"touchstart"],[null,"mousedown"],[null,"touchend"],[null,"mouseup"],[null,"touchmove"],[null,"mousemove"],[null,"touchcancel"]],function(n,t,l){var i=!0,u=n.component;return"touchstart"===t&&(i=!1!==e["ɵnov"](n,1).touchStart(l)&&i),"mousedown"===t&&(i=!1!==e["ɵnov"](n,1).touchStart(l)&&i),"touchend"===t&&(i=!1!==e["ɵnov"](n,1).touchEnd(l)&&i),"mouseup"===t&&(i=!1!==e["ɵnov"](n,1).touchEnd(l)&&i),"touchmove"===t&&(i=!1!==e["ɵnov"](n,1).touchEnd(l)&&i),"mousemove"===t&&(i=!1!==e["ɵnov"](n,1).touchEnd(l)&&i),"touchcancel"===t&&(i=!1!==e["ɵnov"](n,1).touchEnd(l)&&i),"click"===t&&(i=!1!==e["ɵnov"](n,1).click(l)&&i),"click"===t&&(i=!1!==u.onRefresh()&&i),i},a.o,a.g)),e["ɵdid"](1,4243456,null,0,u.o,[e.ElementRef,e.Renderer2],{type:[0,"type"],size:[1,"size"]},null),(n()(),e["ɵted"](-1,1,[" 点击刷新 "]))],function(n,t){n(t,1,0,"primary","small")},null)}function d(n){return e["ɵvid"](0,[(n()(),e["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),e["ɵand"](16777216,null,null,1,null,s)),e["ɵdid"](2,16384,null,0,i.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),e["ɵand"](0,null,null,0))],function(n,t){n(t,2,0,t.component.showRefresh)},null)}function p(n){return e["ɵvid"](0,[(n()(),e["ɵeld"](0,0,null,null,10,"div",[["class","page-tip"]],null,null,null,null,null)),(n()(),e["ɵand"](16777216,null,null,1,null,r)),e["ɵdid"](2,16384,null,0,i.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),e["ɵand"](16777216,null,null,1,null,c)),e["ɵdid"](4,16384,null,0,i.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),e["ɵeld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e["ɵted"](6,null,["",""])),(n()(),e["ɵeld"](7,0,[["custom",1]],null,1,"div",[],null,null,null,null,null)),e["ɵncd"](null,0),(n()(),e["ɵand"](16777216,null,null,1,null,d)),e["ɵdid"](10,16384,null,0,i.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,t){var l=t.component;n(t,2,0,"loading"===(null==l.payload?null:l.payload.status)),n(t,4,0,"loading"!==(null==l.payload?null:l.payload.status)),n(t,10,0,0==e["ɵnov"](t,7).childNodes.length)},function(n,t){n(t,6,0,t.component.message)})}function f(n){return e["ɵvid"](0,[(n()(),e["ɵand"](16777216,null,null,1,null,p)),e["ɵdid"](1,16384,null,0,i.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,t){n(t,1,0,t.component.show)},null)}},"9yfL":function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),i=function(){return function(){}}(),u=l("pMnS"),a=l("MKJQ"),o=l("jy/b"),r=l("57in"),c=l("xvo6"),s=l("Ip0R"),d=l("lbwW"),p=l("U3FM"),f=function(){function n(n,t){this.aums=n,this.logger=t}return n.TAG="ArticlePhotoesService",n.ngInjectableDef=e["ɵɵdefineInjectable"]({factory:function(){return new n(e["ɵɵinject"](d.a),e["ɵɵinject"](p.b))},token:n,providedIn:"root"}),n}(),g=l("atIC"),m=l("+SBZ"),h=l("h1wG"),v=l("1FC6"),y=l("0Huk"),I=function(){function n(n,t,l,e,i,u,a,o){this.articlePhotoesService=n,this.logger=t,this.app=l,this.aums=e,this.route=i,this.umsUser=u,this.normalUser=a,this.statsService=o,this.slideOpts={effect:"fade",zoom:{maxRatio:3,minRatio:2},on:{beforeInit:function(){this.classNames.push(this.params.containerModifierClass+"fade");var n={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};this.params=Object.assign(this.params,n),this.params=Object.assign(this.originalParams,n)},setTranslate:function(){for(var n=this.slides,t=0;t<n.length;t+=1){var l=this.slides.eq(t),e=-l[0].swiperSlideOffset;this.params.virtualTranslate||(e-=this.translate);var i=0;this.isHorizontal()||(i=e,e=0);var u=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(l[0].progress),0):1+Math.min(Math.max(l[0].progress,-1),0);l.css({opacity:u}).transform("translate3d("+e+"px, "+i+"px, 0px)")}},setTransition:function(n){var t=this,l=t.slides,e=t.$wrapperEl;if(l.transition(n),t.params.virtualTranslate&&0!==n){var i=!1;l.transitionEnd(function(){if(!i&&t&&!t.destroyed){i=!0,t.animating=!1;for(var n=["webkitTransitionEnd","transitionend"],l=0;l<n.length;l+=1)e.trigger(n[l])}})}}}},this.typeId=2,this.voteTypeId=this.app.appConfig.vote.type.view.article.typeId,this.viewCount=0,this.atlasData=[],this.articleId=this.route.snapshot.paramMap.get("articleId")}return n.prototype.ngOnInit=function(){this.pageTipPayload={status:"loading"},this.articleId&&(this.getArticleQuery={id:this.articleId,typeid:this.typeId}),this.getArticleQuery&&(this.pageInit(),this.statPageView())},n.prototype.pageInit=function(){this.getAtlasData()},n.prototype.getAtlasData=function(){var t=this;this.aums.getArticle(this.getArticleQuery).subscribe(function(l){"success"===l.status?Array.isArray(l.data.ArticleRelation)&&l.data.ArticleRelation.length?(t.pageTipPayload={status:"success"},l.data.ArticleRelation.forEach(function(n){""!==n.atext&&"添加图片描述信息"!==n.atext||(n.atext="暂无描述信息"),t.atlasData.push({id:n.id,articleId:n.articleid,title:l.data.article.ftitle,desc:n.atext,url:n.adescride,hits:l.data.article.fhits})}),t.atlasData&&t.logger.info(n.TAG+" getAtlasData() 图集数据："+JSON.stringify(t.atlasData))):(t.pageTipPayload={status:"empty",message:"图集为空！"},t.logger.warn(n.TAG+" getAtlasData() msg："+(JSON.stringify(l.data.ArticleRelation)||"图集数据为空"))):(t.pageTipPayload={status:"error"},t.logger.error(n.TAG+" getAtlasData() msg："+(JSON.stringify(l.message)||"获取图集数据失败")))},function(l){t.pageTipPayload={status:"offline"},t.logger.error(n.TAG+" getAtlasData() msg:"+JSON.stringify(l.message)+" || '请求出错' ")})},n.prototype.goBack=function(n){n.stopPropagation(),this.app.back()},n.prototype.statPageView=function(){var t=this;this.statsService.fetchTotalCount({viewTypeId:this.app.appConfig.vote.type.view.article.typeId,ids:this.articleId}).subscribe(function(l){if(Array.isArray(l)&&l.length){var e=l.find(function(n){return n.id===t.articleId});e&&(t.viewCount=e.viewCount)}t.aums.castVote(t.articleId,t.voteTypeId).subscribe(function(l){"success"===l.status?(t.app.appChannel.emit({type:v.a.UPDATELISTSTATS,data:{id:t.articleId,type:"article",statsType:"view",count:t.viewCount++}}),t.logger.debug(n.TAG+" statePageView() succssInfo:"+(l.message||"浏览量统计成功"))):t.logger.error(n.TAG+" statPageView() errInfo:"+(l.message||"浏览量统计失败"))})})},n.TAG="ArticlePhotoesPage",n}(),b=l("ZYCi"),C=e["ɵcrt"]({encapsulation:0,styles:[[".backBtn[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:99}ion-icon[_ngcontent-%COMP%]{color:#fff;margin-top:15px;margin-left:-10px;font-size:28px;text-shadow:0 0 3px #000}.wrap[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.swiper-container[_ngcontent-%COMP%]{height:100%}.img-wrap[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#030303;display:flex;flex-direction:column;justify-content:center;align-items:center}.text-wrap[_ngcontent-%COMP%]{width:auto;height:108px;position:absolute;left:10px;bottom:15px}p[_ngcontent-%COMP%]{text-align:left;line-height:24px;font-size:16px;color:#fff;text-shadow:0 0 3px #000}p[_ngcontent-%COMP%]:last-child{font-size:14px;color:#bbbaba}"]],data:{}});function w(n){return e["ɵvid"](0,[(n()(),e["ɵeld"](0,0,null,null,10,"ion-slide",[],null,null,null,a.Ub,a.T)),e["ɵdid"](1,49152,null,0,o.ob,[e.ChangeDetectorRef,e.ElementRef,e.NgZone],null,null),(n()(),e["ɵeld"](2,0,null,0,1,"div",[["class","img-wrap"]],null,null,null,null,null)),(n()(),e["ɵeld"](3,0,null,null,0,"img",[["class","img"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(n()(),e["ɵeld"](4,0,null,0,6,"div",[["class","text-wrap"]],null,null,null,null,null)),(n()(),e["ɵeld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e["ɵted"](6,null,[" "," / "," "])),(n()(),e["ɵeld"](7,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e["ɵted"](8,null,[" "," "])),(n()(),e["ɵeld"](9,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e["ɵted"](10,null,[" "," "]))],null,function(n,t){var l=t.component;n(t,3,0,t.context.$implicit.url,e["ɵinlineInterpolate"](1,"图片",t.context.index,"")),n(t,6,0,t.context.index+1,l.atlasData.length),n(t,8,0,t.context.$implicit.title),n(t,10,0,t.context.$implicit.desc)})}function O(n){return e["ɵvid"](0,[e["ɵqud"](402653184,1,{sliderRef:0}),(n()(),e["ɵeld"](1,0,null,null,13,"ion-content",[],null,null,null,a.ob,a.n)),e["ɵdid"](2,49152,null,0,o.v,[e.ChangeDetectorRef,e.ElementRef,e.NgZone],null,null),(n()(),e["ɵeld"](3,0,null,0,11,"div",[["class","wrap"]],null,null,null,null,null)),(n()(),e["ɵeld"](4,0,null,null,4,"div",[["class","backBtn"]],null,null,null,null,null)),(n()(),e["ɵeld"](5,0,null,null,3,"ion-button",[["fill","clear"],["mod","ios"]],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.goBack(l)&&e),e},a.fb,a.e)),e["ɵdid"](6,49152,null,0,o.l,[e.ChangeDetectorRef,e.ElementRef,e.NgZone],{fill:[0,"fill"]},null),(n()(),e["ɵeld"](7,0,null,0,1,"ion-icon",[["name","chevron-back-outline"],["slot","icon-only"]],null,null,null,a.vb,a.u)),e["ɵdid"](8,49152,null,0,o.D,[e.ChangeDetectorRef,e.ElementRef,e.NgZone],{name:[0,"name"]},null),(n()(),e["ɵeld"](9,0,null,null,1,"evm-page-tip",[],null,[[null,"refresh"]],function(n,t,l){var e=!0;return"refresh"===t&&(e=!1!==n.component.pageInit()&&e),e},r.b,r.a)),e["ɵdid"](10,638976,null,0,c.d,[e.ElementRef,e.Renderer2],{payload:[0,"payload"]},{refresh:"refresh"}),(n()(),e["ɵeld"](11,0,null,null,3,"ion-slides",[["pager","false"]],null,null,null,a.Vb,a.U)),e["ɵdid"](12,49152,[[1,4],["sliderRef",4]],0,o.pb,[e.ChangeDetectorRef,e.ElementRef,e.NgZone],{options:[0,"options"],pager:[1,"pager"]},null),(n()(),e["ɵand"](16777216,null,0,1,null,w)),e["ɵdid"](14,278528,null,0,s.NgForOf,[e.ViewContainerRef,e.TemplateRef,e.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,t){var l=t.component;n(t,6,0,"clear"),n(t,8,0,"chevron-back-outline"),n(t,10,0,l.pageTipPayload),n(t,12,0,l.slideOpts,"false"),n(t,14,0,l.atlasData)},null)}function x(n){return e["ɵvid"](0,[(n()(),e["ɵeld"](0,0,null,null,1,"app-article-photoes",[],null,null,null,O,C)),e["ɵdid"](1,114688,null,0,I,[f,p.b,g.a,d.a,b.a,m.a,h.a,y.a],null,null)],function(n,t){n(t,1,0)},null)}var R=e["ɵccf"]("app-article-photoes",I,x,{},{},[]),T=l("gIcY"),P=function(){return function(){}}(),A=l("PqVL");l.d(t,"ArticlePhotoesPageModuleNgFactory",function(){return M});var M=e["ɵcmf"](i,[],function(n){return e["ɵmod"]([e["ɵmpd"](512,e.ComponentFactoryResolver,e["ɵCodegenComponentFactoryResolver"],[[8,[u.a,R]],[3,e.ComponentFactoryResolver],e.NgModuleRef]),e["ɵmpd"](4608,s.NgLocalization,s.NgLocaleLocalization,[e.LOCALE_ID,[2,s["ɵangular_packages_common_common_a"]]]),e["ɵmpd"](4608,T.y,T.y,[]),e["ɵmpd"](4608,o.c,o.c,[e.NgZone,e.ApplicationRef]),e["ɵmpd"](4608,o.Fb,o.Fb,[o.c,e.ComponentFactoryResolver,e.Injector]),e["ɵmpd"](4608,o.Jb,o.Jb,[o.c,e.ComponentFactoryResolver,e.Injector]),e["ɵmpd"](1073742336,s.CommonModule,s.CommonModule,[]),e["ɵmpd"](1073742336,T.x,T.x,[]),e["ɵmpd"](1073742336,T.i,T.i,[]),e["ɵmpd"](1073742336,o.Cb,o.Cb,[]),e["ɵmpd"](1073742336,b.n,b.n,[[2,b.s],[2,b.m]]),e["ɵmpd"](1073742336,P,P,[]),e["ɵmpd"](1073742336,A.cb,A.cb,[]),e["ɵmpd"](1073742336,A.Mc,A.Mc,[]),e["ɵmpd"](1073742336,A.Kc,A.Kc,[]),e["ɵmpd"](1073742336,A.kb,A.kb,[]),e["ɵmpd"](1073742336,A.p,A.p,[]),e["ɵmpd"](1073742336,c.b,c.b,[]),e["ɵmpd"](1073742336,i,i,[]),e["ɵmpd"](1024,b.k,function(){return[[{path:"",component:I}]]},[])])})}}]);