(self.webpackChunkcom_evmtv_wuhai=self.webpackChunkcom_evmtv_wuhai||[]).push([[2900],{3646:(t,e,i)=>{"use strict";i.d(e,{G:()=>r});var n=i(639),s=i(8583),o=i(7823);let r=(()=>{class t{constructor(t,e){this.location=t,this.navController=e}ngOnInit(){}back(){this.navController.pop()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(s.Ye),n.Y36(o.SH))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-header"]],inputs:{title:"title"},decls:7,vars:1,consts:[[1,"header"],[1,"header-nav"],[1,"left",3,"click"],["t","1628131979649","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","2138","width","100%","height","100%",1,"icon"],["d","M254.409068 506.453065C246.433839 490.453407 249.196993 470.606109 262.516391 457.286712L684.842246 34.960856C701.623969 18.179133 728.545954 18.27219 745.208322 34.934558 761.98686 51.713096 761.858918 78.623741 745.182024 95.300635L334.036798 506.445862 745.182024 917.591089C761.963748 934.372812 761.870694 961.294794 745.208322 977.957165 728.429785 994.735703 701.51914 994.607761 684.842246 977.930867L262.516391 555.605012C249.13269 542.221311 246.481899 522.388074 254.409068 506.453065Z","p-id","2139","fill","#fff"],[1,"title"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"span",2),n.NdJ("click",function(){return e.back()}),n.O4$(),n.TgZ(3,"svg",3),n._UZ(4,"path",4),n.qZA(),n.qZA(),n.kcU(),n.TgZ(5,"span",5),n._uU(6),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(6),n.Oqu(e.title))},styles:[".header-nav[_ngcontent-%COMP%]{background-color:#0f8eef;height:5rem}.header-nav[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;font-size:1.8rem;height:100%}.header-nav[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:absolute;width:2.5rem;height:2.5rem;display:inline-block;top:1.25rem;left:1rem}.header-nav[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}"]}),t})()},2900:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ListModule:()=>y});var n=i(8583),s=i(7823),o=i(7338),r=i(4762),c=i(639),a=i(378),l=i(8685),h=i(2478),d=i(8138),p=i(9709),u=i(3646),g=i(4470),m=i(1201);function f(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-infinite-scroll",7),c.NdJ("ionInfinite",function(e){return c.CHM(t),c.oxw().loadData(e)}),c._UZ(1,"ion-infinite-scroll-content",8),c.qZA()}}function v(t,e){1&t&&c._UZ(0,"app-nomore")}const I=[{path:"",component:(()=>{class t{constructor(t,e,i,n,s,o){this.activatedRoute=t,this.aumsApiService=e,this.appService=i,this.listService=n,this.utilService=s,this.userService=o,this.TAG="ListComponent",this.pageIndex=1,this.pageSize=10,this.title=this.activatedRoute.snapshot.queryParams.name,this.id=this.activatedRoute.snapshot.queryParams.id}ngOnInit(){this.load()}load(t){this.aumsApiService.getArticleList({curPage:this.pageIndex,pageSize:this.pageSize,columnId:this.id,areaId:this.appService.config.aums.areaId,areaType:1}).subscribe(e=>{if(t&&t.target.complete(),"ok"==e.kind){e.items.length<this.pageSize&&(this.nomore=!0),1==this.pageIndex&&0==e.items.length&&(this.empty=!0),this.articleList=(this.articleList||[]).concat(e.items);const t=[];this.articleList.forEach(e=>{e.praised=!1,e.new=this.utilService.isToday(e.upDataTime),t.push(e.articleId)}),this.getArticleListViewCont(t)}})}doRefresh(t){this.pageIndex=1,this.nomore=!1,this.empty=!1,this.articleList=null,this.load(t)}loadData(t){this.pageIndex+=1,this.load(t)}getArticleListViewCont(t){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.listService.getArticleViewCont({typeId:this.appService.config.aums_vote.article_view,columnIds:t.join(",")}).toPromise(),i=yield this.listService.getArticleViewCont({typeId:this.appService.config.aums_vote.article_like,columnIds:t.join(",")}).toPromise(),n=this.utilService.getUUID(),s=yield this.listService.getUserLikeCont({typeId:this.appService.config.aums_vote.article_like,columnIds:t.join(","),userId:n||"pc"}).toPromise();this.articleList.forEach(t=>{t.comment=this.listService.getCommentCont({targetId:t.articleId,commentTypeId:this.appService.config.aums_comment.articleId,userId:this.userService.getUser(),userTypeId:this.appService.config.ums.userType}).subscribe(e=>{t.commentCont="ok"==e.kind?e.items.length:0})}),"ok"==e.kind?this.articleList.forEach(t=>{const i=e.items.find(e=>e.columnId==t.articleId);t.viewCont=i.totalCnt,i.totalCnt>=this.appService.config.aums.hotnum&&(t.hot=!0)}):this.utilService.log("debug",this.TAG,"get article view cont",JSON.stringify(e)),"ok"==i.kind?this.articleList.forEach(t=>{const e=i.items.find(e=>e.columnId==t.articleId);t.likeCont=e.totalCnt}):this.utilService.log("debug",this.TAG,"get article like cont",JSON.stringify(i)),"ok"==s.kind?this.articleList.forEach(t=>{s.items.find(e=>e.columnId==t.articleId)&&(t.praised=!0)}):this.utilService.log("debug",this.TAG,"get user like cont",JSON.stringify(s))})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(o.gz),c.Y36(a.j),c.Y36(l.z),c.Y36(h.X),c.Y36(d.f),c.Y36(p.K))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-list"]],decls:8,vars:5,consts:[[3,"title"],["slot","fixed",2,"z-index","1",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","","refreshingSpinner","circles","refreshingText",""],[1,"list"],[3,"data","cId"],["threshold","80px",3,"ionInfinite",4,"ngIf"],[4,"ngIf"],["threshold","80px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","\u6b63\u5728\u52a0\u8f7d..."]],template:function(t,e){1&t&&(c._UZ(0,"app-header",0),c.TgZ(1,"ion-content"),c.TgZ(2,"ion-refresher",1),c.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),c._UZ(3,"ion-refresher-content",2),c.qZA(),c.TgZ(4,"div",3),c._UZ(5,"app-article-list",4),c.qZA(),c.YNc(6,f,2,0,"ion-infinite-scroll",5),c.YNc(7,v,1,0,"app-nomore",6),c.qZA()),2&t&&(c.Q6J("title",e.title),c.xp6(5),c.Q6J("data",e.articleList)("cId",e.id),c.xp6(1),c.Q6J("ngIf",(null==e.articleList?null:e.articleList.length)&&!e.nomore),c.xp6(1),c.Q6J("ngIf",e.nomore&&!e.empty))},directives:[u.G,s.W2,s.nJ,s.Wo,g.P,n.O5,s.ju,s.MB,m.o],styles:[".list[_ngcontent-%COMP%]{padding:1rem 1rem 0}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.Bz.forChild(I)],o.Bz]}),t})();var C=i(5642);let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,s.Pc,C.K,S]]}),t})()}}]);