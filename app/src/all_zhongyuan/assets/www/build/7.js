webpackJsonp([7],{855:function(l,n,e){"use strict";function t(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,1,"div",[["class","field-content"]],null,null,null,null,null)),(l()(),C["ɵted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.parent.parent.parent.context.$implicit.content||"暂无")})}function i(l){return C["ɵvid"](0,[(l()(),C["ɵted"](-1,null,["\n            "])),(l()(),C["ɵeld"](1,0,null,null,0,"div",[["class","field-content"]],[[8,"innerHTML",1]],null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n          "]))],null,function(l,n){l(n,1,0,n.component.sanitizer.bypassSecurityTrustHtml(n.parent.parent.parent.context.$implicit.content||"暂无"))})}function u(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,1,"ion-icon",[["name","ios-arrow-forward-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C["ɵdid"](1,147456,[[5,4]],0,z.a,[K.a,C.ElementRef,C.Renderer],{name:[0,"name"]},null)],function(l,n){l(n,1,0,"ios-arrow-forward-outline")},function(l,n){l(n,0,0,C["ɵnov"](n,1)._hidden)})}function a(l){return C["ɵvid"](0,[(l()(),C["ɵted"](-1,null,["\n            "])),(l()(),C["ɵeld"](1,0,null,null,1,"ion-icon",[["class","iconfont icon-bianji"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C["ɵdid"](2,147456,[[5,4]],0,z.a,[K.a,C.ElementRef,C.Renderer],null,null),(l()(),C["ɵted"](-1,null,["\n          "]))],null,function(l,n){l(n,1,0,C["ɵnov"](n,2)._hidden)})}function o(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,13,"div",[["class","field"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵeld"](2,0,null,null,0,"div",[["class","field-content-mask"],["tappable",""]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.edit(l.parent.parent.context.$implicit,l.parent.parent.context.index)&&t}return t},null,null)),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵand"](16777216,null,null,1,null,t)),C["ɵdid"](5,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵand"](0,[["contentBlock",2]],null,0,null,i)),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵand"](16777216,null,null,1,null,u)),C["ɵdid"](10,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵand"](0,[["elseBlock",2]],null,0,null,a)),(l()(),C["ɵted"](-1,null,["\n        "]))],function(l,n){l(n,5,0,"content"!==n.parent.parent.context.$implicit.role,C["ɵnov"](n,7));l(n,10,0,"content"===n.parent.parent.context.$implicit.role,C["ɵnov"](n,12))},null)}function r(l){return C["ɵvid"](0,[(l()(),C["ɵand"](0,null,null,0))],null,null)}function d(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,10,null,null,null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵeld"](2,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),C["ɵted"](3,null,["",""])),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵand"](16777216,null,null,1,null,o)),C["ɵdid"](6,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵand"](16777216,null,null,1,null,r)),C["ɵdid"](9,16384,[[1,4]],0,w.a,[C.ViewContainerRef],null,null),(l()(),C["ɵted"](-1,null,["\n      "]))],function(l,n){l(n,6,0,!n.parent.context.$implicit.edit)},function(l,n){l(n,3,0,n.parent.context.$implicit.description+":")})}function s(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,n.context.$implicit)})}function c(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,7,"div",[["class","upload-image-list"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n              "])),(l()(),C["ɵand"](16777216,null,null,1,null,s)),C["ɵdid"](3,802816,null,0,W.NgForOf,[C.ViewContainerRef,C.TemplateRef,C.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),C["ɵted"](-1,null,["\n              "])),(l()(),C["ɵeld"](5,0,null,null,1,"ion-icon",[["name","ios-close-outline"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.clear(l.parent.parent.context.$implicit)&&t}return t},null,null)),C["ɵdid"](6,147456,[[5,4]],0,z.a,[K.a,C.ElementRef,C.Renderer],{name:[0,"name"]},null),(l()(),C["ɵted"](-1,null,["\n            "]))],function(l,n){l(n,3,0,n.parent.parent.context.$implicit.uploadImageList);l(n,6,0,"ios-close-outline")},function(l,n){l(n,5,0,C["ɵnov"](n,6)._hidden)})}function p(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,12,"div",[["class","upload-file"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n              "])),(l()(),C["ɵeld"](2,0,null,null,0,"input",[["accept","image/"],["type","file"]],null,[[null,"change"]],function(l,n,e){var t=!0;if("change"===n){t=!1!==l.component.changeImage(e,l.parent.parent.context.$implicit)&&t}return t},null,null)),(l()(),C["ɵted"](-1,null,["\n              "])),(l()(),C["ɵeld"](4,0,null,null,7,"div",[["class","upload-file-inner"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n                "])),(l()(),C["ɵeld"](6,0,null,null,1,"ion-icon",[["ios","ios-add"],["md","md-add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C["ɵdid"](7,147456,[[5,4]],0,z.a,[K.a,C.ElementRef,C.Renderer],{ios:[0,"ios"],md:[1,"md"]},null),(l()(),C["ɵted"](-1,null,["\n                "])),(l()(),C["ɵeld"](9,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["图片上传"])),(l()(),C["ɵted"](-1,null,["\n              "])),(l()(),C["ɵted"](-1,null,["\n            "]))],function(l,n){l(n,7,0,"ios-add","md-add")},function(l,n){l(n,6,0,C["ɵnov"](n,7)._hidden)})}function m(l){return C["ɵvid"](0,[(l()(),C["ɵand"](0,null,null,0))],null,null)}function f(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,19,null,null,null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵeld"](2,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),C["ɵted"](3,null,["",""])),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵeld"](5,0,null,null,10,"div",[["class","field"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵeld"](7,0,null,null,7,"div",[["class","upload-file-container"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n            "])),(l()(),C["ɵand"](16777216,null,null,1,null,c)),C["ɵdid"](10,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),C["ɵted"](-1,null,["\n            "])),(l()(),C["ɵand"](16777216,null,null,1,null,p)),C["ɵdid"](13,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵand"](16777216,null,null,1,null,m)),C["ɵdid"](18,16384,[[1,4]],0,w.a,[C.ViewContainerRef],null,null),(l()(),C["ɵted"](-1,null,["\n      "]))],function(l,n){l(n,10,0,null==n.parent.context.$implicit.uploadImageList?null:n.parent.context.$implicit.uploadImageList.length);l(n,13,0,!(null!=n.parent.context.$implicit.uploadImageList&&n.parent.context.$implicit.uploadImageList.length))},function(l,n){l(n,3,0,n.parent.context.$implicit.description+":")})}function g(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,13,"div",[["class","item item-block"],["ion-item",""]],null,null,null,Z.b,Z.a)),C["ɵdid"](1,1097728,null,3,Q.a,[X.a,K.a,C.ElementRef,C.Renderer,[2,ll.a]],null,null),C["ɵqud"](335544320,3,{contentLabel:0}),C["ɵqud"](603979776,4,{_buttons:1}),C["ɵqud"](603979776,5,{_icons:1}),C["ɵdid"](5,16384,null,0,nl.a,[],null,null),(l()(),C["ɵted"](-1,2,["\n      "])),(l()(),C["ɵand"](16777216,null,2,1,null,d)),C["ɵdid"](8,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),C["ɵted"](-1,2,["\n      "])),(l()(),C["ɵand"](16777216,null,2,1,null,f)),C["ɵdid"](11,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),C["ɵted"](-1,2,["\n      "])),(l()(),C["ɵted"](-1,2,["\n    "]))],function(l,n){l(n,8,0,"text"===n.context.$implicit.type);l(n,11,0,"img"===n.context.$implicit.type)},null)}function h(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,n.context.$implicit)})}function v(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,7,"div",[["class","upload-image-list"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵand"](16777216,null,null,1,null,h)),C["ɵdid"](3,802816,null,0,W.NgForOf,[C.ViewContainerRef,C.TemplateRef,C.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵeld"](5,0,null,null,1,"ion-icon",[["name","ios-close-outline"],["role","img"]],[[2,"hide",null]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.clear()&&t}return t},null,null)),C["ɵdid"](6,147456,[[8,4]],0,z.a,[K.a,C.ElementRef,C.Renderer],{name:[0,"name"]},null),(l()(),C["ɵted"](-1,null,["\n        "]))],function(l,n){l(n,3,0,n.component.thumbnailUrl);l(n,6,0,"ios-close-outline")},function(l,n){l(n,5,0,C["ɵnov"](n,6)._hidden)})}function b(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,12,"div",[["class","upload-file"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵeld"](2,0,null,null,0,"input",[["accept","image/*"],["type","file"]],null,[[null,"change"]],function(l,n,e){var t=!0;if("change"===n){t=!1!==l.component.changeImage(e)&&t}return t},null,null)),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵeld"](4,0,null,null,7,"div",[["class","upload-file-inner"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n            "])),(l()(),C["ɵeld"](6,0,null,null,1,"ion-icon",[["ios","ios-add"],["md","md-add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),C["ɵdid"](7,147456,[[8,4]],0,z.a,[K.a,C.ElementRef,C.Renderer],{ios:[0,"ios"],md:[1,"md"]},null),(l()(),C["ɵted"](-1,null,["\n            "])),(l()(),C["ɵeld"](9,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["图片上传"])),(l()(),C["ɵted"](-1,null,["\n          "])),(l()(),C["ɵted"](-1,null,["\n        "]))],function(l,n){l(n,7,0,"ios-add","md-add")},function(l,n){l(n,6,0,C["ɵnov"](n,7)._hidden)})}function I(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,21,"div",[["class","item item-block"],["ion-item",""]],null,null,null,Z.b,Z.a)),C["ɵdid"](1,1097728,null,3,Q.a,[X.a,K.a,C.ElementRef,C.Renderer,[2,ll.a]],null,null),C["ɵqud"](335544320,6,{contentLabel:0}),C["ɵqud"](603979776,7,{_buttons:1}),C["ɵqud"](603979776,8,{_icons:1}),C["ɵdid"](5,16384,null,0,nl.a,[],null,null),(l()(),C["ɵted"](-1,2,["\n    "])),(l()(),C["ɵeld"](7,0,null,2,1,"label",[],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["封面图片："])),(l()(),C["ɵted"](-1,2,["\n    "])),(l()(),C["ɵeld"](10,0,null,2,10,"div",[["class","field"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n      "])),(l()(),C["ɵeld"](12,0,null,null,7,"div",[["class","upload-file-container"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵand"](16777216,null,null,1,null,v)),C["ɵdid"](15,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),C["ɵted"](-1,null,["\n        "])),(l()(),C["ɵand"](16777216,null,null,1,null,b)),C["ɵdid"](18,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),C["ɵted"](-1,null,["\n      "])),(l()(),C["ɵted"](-1,null,["\n    "])),(l()(),C["ɵted"](-1,2,["\n  "]))],function(l,n){var e=n.component;l(n,15,0,null==e.thumbnailUrl?null:e.thumbnailUrl.length);l(n,18,0,!(null!=e.thumbnailUrl&&e.thumbnailUrl.length))},null)}function y(l){return C["ɵvid"](0,[C["ɵqud"](671088640,1,{hosts:1}),(l()(),C["ɵeld"](1,0,null,null,19,"ion-header",[],null,null,null,null,null)),C["ɵdid"](2,16384,null,0,el.a,[K.a,C.ElementRef,C.Renderer,[2,tl.a]],null,null),(l()(),C["ɵted"](-1,null,["\n\n  "])),(l()(),C["ɵeld"](4,0,null,null,15,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,il.b,il.a)),C["ɵdid"](5,49152,null,0,ul.a,[al.a,[2,tl.a],[2,ol.a],K.a,C.ElementRef,C.Renderer],null,null),(l()(),C["ɵted"](-1,3,["\n    "])),(l()(),C["ɵeld"](7,0,null,3,2,"ion-title",[],null,null,null,rl.b,rl.a)),C["ɵdid"](8,49152,null,0,dl.a,[K.a,C.ElementRef,C.Renderer,[2,sl.a],[2,ul.a]],null,null),(l()(),C["ɵted"](9,0,["",""])),(l()(),C["ɵted"](-1,3,["\n    "])),(l()(),C["ɵeld"](11,0,null,2,7,"ion-buttons",[["end",""]],null,null,null,null,null)),C["ɵdid"](12,16384,null,1,cl.a,[K.a,C.ElementRef,C.Renderer,[2,sl.a],[2,ul.a]],null,null),C["ɵqud"](603979776,2,{_buttons:1}),(l()(),C["ɵted"](-1,null,["\n      "])),(l()(),C["ɵeld"](15,0,null,null,2,"button",[["clear",""],["ion-button",""],["large",""]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.publish()&&t}return t},pl.b,pl.a)),C["ɵdid"](16,1097728,[[2,4]],0,ml.a,[[8,""],K.a,C.ElementRef,C.Renderer],{large:[0,"large"],clear:[1,"clear"]},null),(l()(),C["ɵted"](-1,0,["\n        发布\n      "])),(l()(),C["ɵted"](-1,null,["\n    "])),(l()(),C["ɵted"](-1,3,["\n  "])),(l()(),C["ɵted"](-1,null,["\n\n"])),(l()(),C["ɵted"](-1,null,["\n\n\n"])),(l()(),C["ɵeld"](22,0,null,null,57,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null],[2,"has-infinite-scroll",null]],null,null,fl.b,fl.a)),C["ɵdid"](23,4374528,null,0,gl.a,[K.a,hl.a,vl.a,C.ElementRef,C.Renderer,al.a,bl.a,C.NgZone,[2,tl.a],[2,ol.a]],null,null),(l()(),C["ɵted"](-1,1,["\n  "])),(l()(),C["ɵeld"](25,0,null,1,5,"ion-list",[],null,null,null,null,null)),C["ɵdid"](26,16384,null,0,Il.a,[K.a,C.ElementRef,C.Renderer,hl.a,yl.l,vl.a],null,null),(l()(),C["ɵted"](-1,null,["\n    "])),(l()(),C["ɵand"](16777216,null,null,1,null,g)),C["ɵdid"](29,802816,null,0,W.NgForOf,[C.ViewContainerRef,C.TemplateRef,C.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),C["ɵted"](-1,null,["\n  "])),(l()(),C["ɵted"](-1,1,["\n  \n  "])),(l()(),C["ɵand"](16777216,null,1,1,null,I)),C["ɵdid"](33,16384,null,0,W.NgIf,[C.ViewContainerRef,C.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),C["ɵted"](-1,1,["\n  "])),(l()(),C["ɵeld"](35,0,null,1,20,"div",[["class","publish-push-toggle"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n    "])),(l()(),C["ɵeld"](37,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,Z.b,Z.a)),C["ɵdid"](38,1097728,null,3,Q.a,[X.a,K.a,C.ElementRef,C.Renderer,[2,ll.a]],null,null),C["ɵqud"](335544320,9,{contentLabel:0}),C["ɵqud"](603979776,10,{_buttons:1}),C["ɵqud"](603979776,11,{_icons:1}),C["ɵdid"](42,16384,null,0,nl.a,[],null,null),(l()(),C["ɵted"](-1,2,["\n      "])),(l()(),C["ɵeld"](44,0,null,1,2,"ion-label",[],null,null,null,null,null)),C["ɵdid"](45,16384,[[9,4]],0,Cl.a,[K.a,C.ElementRef,C.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(l()(),C["ɵted"](-1,null,["是否推送"])),(l()(),C["ɵted"](-1,2,["\n      "])),(l()(),C["ɵeld"](48,0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(l,n,e){var t=!0,i=l.component;if("keyup"===n){t=!1!==C["ɵnov"](l,49)._keyup(e)&&t}if("ngModelChange"===n){t=!1!==(i.pushThis=e)&&t}return t},Tl.b,Tl.a)),C["ɵdid"](49,1228800,null,0,Rl.a,[X.a,K.a,hl.a,C.ElementRef,C.Renderer,Pl.a,[2,Q.a],yl.l,vl.a,C.NgZone],null,null),C["ɵprd"](1024,null,wl.l,function(l){return[l]},[Rl.a]),C["ɵdid"](51,671744,null,0,wl.p,[[8,null],[8,null],[8,null],[2,wl.l]],{model:[0,"model"]},{update:"ngModelChange"}),C["ɵprd"](2048,null,wl.m,null,[wl.p]),C["ɵdid"](53,16384,null,0,wl.n,[wl.m],null,null),(l()(),C["ɵted"](-1,2,["\n    "])),(l()(),C["ɵted"](-1,null,["\n  "])),(l()(),C["ɵted"](-1,1,["\n  "])),(l()(),C["ɵeld"](57,0,null,1,21,"div",[["class","publish-date-time"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n    "])),(l()(),C["ɵeld"](59,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["设置发布时间:"])),(l()(),C["ɵted"](-1,null,["\n    "])),(l()(),C["ɵeld"](62,0,null,null,15,"div",[["class","field"]],null,null,null,null,null)),(l()(),C["ɵted"](-1,null,["\n      "])),(l()(),C["ɵeld"](64,0,null,null,5,"ion-datetime",[["cancelText","取消"],["class","input-theme"],["displayFormat","YYYY-MM-DD"],["doneText","确定"],["max","2099-01-01"],["placeholder","选择日期"]],[[4,"margin-right","px"],[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(l,n,e){var t=!0,i=l.component;if("click"===n){t=!1!==C["ɵnov"](l,65)._click(e)&&t}if("keyup.space"===n){t=!1!==C["ɵnov"](l,65)._keyup()&&t}if("ngModelChange"===n){t=!1!==(i.articlePublishDate=e)&&t}return t},kl.b,kl.a)),C["ɵdid"](65,1228800,null,0,_l.a,[X.a,K.a,C.ElementRef,C.Renderer,[2,Q.a],[2,El.a]],{max:[0,"max"],displayFormat:[1,"displayFormat"],cancelText:[2,"cancelText"],doneText:[3,"doneText"],placeholder:[4,"placeholder"]},null),C["ɵprd"](1024,null,wl.l,function(l){return[l]},[_l.a]),C["ɵdid"](67,671744,null,0,wl.p,[[8,null],[8,null],[8,null],[2,wl.l]],{model:[0,"model"]},{update:"ngModelChange"}),C["ɵprd"](2048,null,wl.m,null,[wl.p]),C["ɵdid"](69,16384,null,0,wl.n,[wl.m],null,null),(l()(),C["ɵted"](-1,null,["\n      "])),(l()(),C["ɵeld"](71,0,null,null,5,"ion-datetime",[["cancelText","取消"],["class","input-theme"],["displayFormat","HH:mm:ss"],["doneText","确定"],["placeholder","选择时间"]],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(l,n,e){var t=!0,i=l.component;if("click"===n){t=!1!==C["ɵnov"](l,72)._click(e)&&t}if("keyup.space"===n){t=!1!==C["ɵnov"](l,72)._keyup()&&t}if("ngModelChange"===n){t=!1!==(i.articlePublishTime=e)&&t}return t},kl.b,kl.a)),C["ɵdid"](72,1228800,null,0,_l.a,[X.a,K.a,C.ElementRef,C.Renderer,[2,Q.a],[2,El.a]],{displayFormat:[0,"displayFormat"],cancelText:[1,"cancelText"],doneText:[2,"doneText"],placeholder:[3,"placeholder"]},null),C["ɵprd"](1024,null,wl.l,function(l){return[l]},[_l.a]),C["ɵdid"](74,671744,null,0,wl.p,[[8,null],[8,null],[8,null],[2,wl.l]],{model:[0,"model"]},{update:"ngModelChange"}),C["ɵprd"](2048,null,wl.m,null,[wl.p]),C["ɵdid"](76,16384,null,0,wl.n,[wl.m],null,null),(l()(),C["ɵted"](-1,null,["\n    "])),(l()(),C["ɵted"](-1,null,["\n  "])),(l()(),C["ɵted"](-1,1,["\n"])),(l()(),C["ɵted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,16,0,"","");l(n,29,0,e.models);l(n,33,0,e.noRelatedThumbnail);l(n,51,0,e.pushThis);l(n,65,0,"2099-01-01","YYYY-MM-DD","取消","确定","选择日期");l(n,67,0,e.articlePublishDate);l(n,72,0,"HH:mm:ss","取消","确定","选择时间");l(n,74,0,e.articlePublishTime)},function(l,n){var e=n.component;l(n,4,0,C["ɵnov"](n,5)._hidden,C["ɵnov"](n,5)._sbPadding);l(n,9,0,e.title);l(n,22,0,C["ɵnov"](n,23).statusbarPadding,C["ɵnov"](n,23)._hasRefresher,C["ɵnov"](n,23)._hasInfiniteScroll);l(n,48,0,C["ɵnov"](n,49)._disabled,C["ɵnov"](n,49)._value,C["ɵnov"](n,49)._activated,C["ɵnov"](n,53).ngClassUntouched,C["ɵnov"](n,53).ngClassTouched,C["ɵnov"](n,53).ngClassPristine,C["ɵnov"](n,53).ngClassDirty,C["ɵnov"](n,53).ngClassValid,C["ɵnov"](n,53).ngClassInvalid,C["ɵnov"](n,53).ngClassPending);l(n,64,0,5,C["ɵnov"](n,65)._disabled,C["ɵnov"](n,69).ngClassUntouched,C["ɵnov"](n,69).ngClassTouched,C["ɵnov"](n,69).ngClassPristine,C["ɵnov"](n,69).ngClassDirty,C["ɵnov"](n,69).ngClassValid,C["ɵnov"](n,69).ngClassInvalid,C["ɵnov"](n,69).ngClassPending);l(n,71,0,C["ɵnov"](n,72)._disabled,C["ɵnov"](n,76).ngClassUntouched,C["ɵnov"](n,76).ngClassTouched,C["ɵnov"](n,76).ngClassPristine,C["ɵnov"](n,76).ngClassDirty,C["ɵnov"](n,76).ngClassValid,C["ɵnov"](n,76).ngClassInvalid,C["ɵnov"](n,76).ngClassPending)})}Object.defineProperty(n,"__esModule",{value:!0});var C=e(1),T=(e(0),e(61),e(95)),R=e(27),P=e(23),w=e(893),k=e(935),_=e(26),E=e(41),A=e(20),x=e(953),N=e(947),D=e(3),V=e(196),U=function(){function l(l,n,e,t,i,u,a,o,r,d,s,c){this.navCtrl=l,this.navParams=n,this.publishProvider=e,this.aums=t,this.logger=i,this.componentFactoryResolver=u,this.utils=a,this.sanitizer=o,this.loadingCtrl=r,this.app=d,this.zone=s,this.adminUserProvider=c,this.models=[],this.noRelatedThumbnail=!1,this.thumbnailUrl=[],this._articleTemArray=[],this.defaultPublishDate=D().format("YYYY-MM-DD"),this.defaultPublishTime=D().format("HH:mm:ss"),this.pushThis=!1,this.isUploading=!1,this._columnName=this.navParams.get("columnName"),this._columnId=+this.navParams.get("columnId"),this._websiteId=this.navParams.get("websiteId"),this._publishpower=this.navParams.get("publishpower"),this._articleId=this.navParams.get("articleId"),this.title=this._columnName,this.articlePublishDate=this.defaultPublishDate,this.articlePublishTime=this.defaultPublishTime}return n=l,Object.defineProperty(l.prototype,"columnName",{get:function(){return this._columnName},enumerable:!0,configurable:!0}),l.prototype.ionViewWillEnter=function(){var l=this.app.getGlobalVar(n.TAG);this.log("info","ionViewWillEnter() content: "+JSON.stringify(l)),l&&void 0!==l.currentValue&&(l.ref.content=l.currentValue),this.app.setGlobalVar(n.TAG,null)},l.prototype.ionViewDidLoad=function(){var l=this;this.adminUserProvider.getAumsPowerByColumn(!1,this._columnName,this._columnId).subscribe(function(n){var e=n.data;e&&l.aums.getTemplateArticleDetail({id:e.defaultArticleTemplateId},l.adminUserProvider.getApiEndPoint()).subscribe(function(n){n&&n.allDisDetail&&(l.models=n.allDisDetail&&n.allDisDetail.filter(function(l){return"stb"!==l.client})||[],l.log("info","ionViewDidLoad() 模板的数据结构: "+JSON.stringify(l.models)),console.log(l.models),l.mode=0===l.models.length?"normal":"template",l.makeModelsInNormalMode(),l.noRelatedThumbnail=l.checkRelatedThumbnail(),l.loadArticle(e.defaultArticleTemplateId))})})},l.prototype.ngAfterViewInit=function(){},l.prototype.edit=function(l,e){switch(this.log("info","edit() item: "+JSON.stringify(l)+" and index: "+e),l.role){case"content":this.app.setGlobalVar(n.TAG,{previousValue:l.content,ref:l}),this.navCtrl.push("editor",{name:l.description,key:n.TAG});break;default:var t=this.hosts.find(function(l,n){return n===e});if(t){l.edit=!0;var i=this.componentFactoryResolver.resolveComponentFactory(k.a),u=t.viewContainerRef;u.clear();var a=u.createComponent(i);a.instance.data=new N.a({value:l.content,maxLength:l.maxLength,required:l.required,label:l.description}),a.instance.onBlur.subscribe(function(n){l.content=n,u.clear(),l.edit=!1})}}},l.prototype.log=function(l,e){this.logger[l](n.TAG+" "+e)},l.prototype.publish=function(){var l=this;this.adminUserProvider.getAumsPowerByColumn(!0,this._columnName,this._columnId).subscribe(function(n){if("success"===n.status){var e=n.data;if(!l.walkAndCheckModels())return;var t=void 0;l.articlePublishTime==l.defaultPublishTime&&l.articlePublishDate==l.defaultPublishDate||(t=l.articlePublishDate+" "+l.articlePublishTime),l.aums.post({id:l._articleId,ftitle:l._articleTitle,fcontent:l._articleContent||"",fsummary:l._articleSummary||"",websiteid:l._websiteId,columnid:l._columnId,userId:l.adminUserProvider.user.id,fimage:l.thumbnailId,areaid:l.adminUserProvider.user.areaId,publishpower:l._publishpower,temArray:l._articleTemArray.length?JSON.stringify(l._articleTemArray):null,ftypeid:"template"===l.mode?1:void 0,ftemplateid:e.defaultArticleTemplateId,fupdatetime:t},l.adminUserProvider.getApiEndPoint()).subscribe(function(n){n&&1==n.isSuccess?(l.app.updateManagerPostItem(l._articleTitle,l.articlePublishDate,l.thumbnailUrl[0]),l._articleId||l.app.setGlobalVar(x.a.TAG,"add"),l.utils.toast("发布成功!"),l.pushThis?l.aums.pushArticle({columnId:l._columnId,articleId:l._articleId,areaId:l.adminUserProvider.user.areaId}).subscribe(function(l){},function(l){},function(){l.navCtrl.pop()}):l.navCtrl.pop()):l.utils.toast("发布失败，请稍后重试!")})}else l.utils.toast("您没有该栏目的编辑权限!")})},l.prototype.walkAndCheckModels=function(){var l,n=this;return this.models.every(function(e){if("title"===e.role&&(n._articleTitle=e.content),"content"===e.role&&(n._articleContent=e.content),"summary"===e.role&&(n._articleSummary=e.content),"image"===e.role&&(n.thumbnailId=e.uploadImageId,n.thumbnailUrl=[e.uploadImageList]),"template"===n.mode){var t={type:e.type,description:e.description,domid:e.DOMId,id:"",text:"",imgid:""};"text"===e.type?t.text=e.content||"":"img"===e.type&&(t.imgid=e.uploadImageId),n._articleTemArray.push(t)}return!("title"===e.role&&!e.content)||(l=e.description+"不能为空",!1)}),!l||(this.utils.toast(l),!1)},l.prototype.clear=function(l){l?(l.uploadImageList=[],l.uploadImageId=null):(this.thumbnailUrl=[],this.thumbnailId=null)},l.prototype.changeImage=function(l,e){var t=this;if(!this.isUploading){this.isUploading=!0;var i=l.target.value,u=l.target.files;if(i){this.logger.debug(n.TAG+" changeImage() 上传图片路径: "+i);var a=i.substr(i.lastIndexOf(".")+1);this.logger.debug(n.TAG+" changeImage() 图片后缀: "+a);var o=u[0];this.app.loadingInstance=this.loadingCtrl.create({content:"图片上传中...",spinner:"dots"}),this.app.loadingInstance.present(),this.aums.uploadImage({name:"test",imgFile:o,userId:this.adminUserProvider.user.id.toString()},this.adminUserProvider.getApiEndPoint()).subscribe(function(l){t.logger.info(n.TAG+" changeImage() uploadImage response: "+JSON.stringify(l)),l&&l.data&&l.data.url?(e?(e.uploadImageList.push(l.data.url),e.uploadImageId=l.data.id):(t.thumbnailUrl.push(l.data.url),t.thumbnailId=l.data.id),t.isUploading=!1):(t.isUploading=!1,t.utils.toast(l.message||"图片上传失败，请稍后再试!")),t.app.closeLoading()},function(l){},function(){l.target.value=null})}}},l.prototype.loadArticle=function(l){var n=this;this._articleId>0&&this.aums.getArticle({id:this._articleId,typeid:1},this.adminUserProvider.getApiEndPoint()).subscribe(function(l){if(n.log("info","loadArticle() res: "+JSON.stringify(l)),1==l.isSuccess&&l.article){if("template"===n.mode){var e=l.ArticleRelation;Array.isArray(e)&&e.forEach(function(l){var e=n.models.find(function(n){return n.DOMId===l.domid});e&&("text"===e.type?e.content=l.atext:(e.uploadImageId=l.imageid,e.uploadImageList=[l.atext]))})}else"normal"===n.mode&&n.models.forEach(function(n){switch(n.role){case"title":n.content=l.article.ftitle;break;case"content":n.content=l.article.fcontent;break;case"summary":n.content=l.article.fsummary}});l.article.fimage&&(n.thumbnailUrl=[l.article.fimage]),l.article.fimageid&&(n.thumbnailId=l.article.fimageid);try{var t=l.article.fupdatetime;n.articlePublishDate=t.substr(0,10),n.articlePublishTime=t.substr(11)}catch(l){n.log("error","loadArticle() 设置发布时间报错: "+l.message)}}else n.utils.toast("加载失败,错误提示: "+l.message),n.navCtrl.pop()})},l.prototype.makeModelsInNormalMode=function(){var l=this;"normal"===this.mode?([{label:"标题",maxLength:20,role:"title"},{label:"摘要",role:"summary"},{label:"缩略图",type:"img",role:"image"},{label:"内容详情",role:"content"}].forEach(function(n){l.models.push({description:n.label,maxLength:n.maxLength,type:n.type||"text",role:n.role})}),this.models.forEach(function(l){"img"===l.type&&(l.uploadImageList=[],l.uploadImageId=null)})):this.models.forEach(function(l){"img"===l.type&&(l.uploadImageList=[],l.uploadImageId=null)})},l.prototype.checkRelatedThumbnail=function(){if("template"===this.mode)return!this.models.some(function(l){return"image"===l.role})},l.TAG="PublishCommonPage",l;var n}(),L=e(907),S=e(948),G=function(){return function(){}}(),M=e(504),F=e(505),O=e(506),B=e(507),q=e(508),$=e(509),J=e(510),Y=e(511),H=e(512),j=e(960),z=e(62),K=e(4),W=e(17),Z=e(513),Q=e(36),X=e(33),ll=e(67),nl=e(127),el=e(128),tl=e(8),il=e(865),ul=e(55),al=e(15),ol=e(37),rl=e(515),dl=e(91),sl=e(57),cl=e(130),pl=e(46),ml=e(32),fl=e(514),gl=e(38),hl=e(7),vl=e(14),bl=e(47),Il=e(89),yl=e(11),Cl=e(68),Tl=e(972),Rl=e(218),Pl=e(48),wl=e(31),kl=e(973),_l=e(216),El=e(97),Al=e(18),xl=e(136),Nl=C["ɵcrt"]({encapsulation:2,styles:[],data:{}}),Dl=C["ɵccf"]("page-publish-common",U,function(l){return C["ɵvid"](0,[(l()(),C["ɵeld"](0,0,null,null,1,"page-publish-common",[],null,null,null,y,Nl)),C["ɵdid"](1,4243456,null,0,U,[ol.a,Al.a,T.d,R.a,P.b,C.ComponentFactoryResolver,_.a,E.c,xl.a,A.a,C.NgZone,V.a],null,null)],null,null)},{},{},[]),Vl=e(13),Ul=e(195),Ll=e(871),Sl=e(63);e.d(n,"PublishCommonPageModuleNgFactory",function(){return Gl});var Gl=C["ɵcmf"](G,[],function(l){return C["ɵmod"]([C["ɵmpd"](512,C.ComponentFactoryResolver,C["ɵCodegenComponentFactoryResolver"],[[8,[M.a,F.a,O.a,B.a,q.a,$.a,J.a,Y.a,H.a,j.a,Dl]],[3,C.ComponentFactoryResolver],C.NgModuleRef]),C["ɵmpd"](4608,W.NgLocalization,W.NgLocaleLocalization,[C.LOCALE_ID,[2,W["ɵa"]]]),C["ɵmpd"](4608,wl.v,wl.v,[]),C["ɵmpd"](4608,wl.d,wl.d,[]),C["ɵmpd"](4608,T.d,T.d,[Vl.c]),C["ɵmpd"](512,W.CommonModule,W.CommonModule,[]),C["ɵmpd"](512,wl.t,wl.t,[]),C["ɵmpd"](512,wl.j,wl.j,[]),C["ɵmpd"](512,wl.r,wl.r,[]),C["ɵmpd"](512,Ul.a,Ul.a,[]),C["ɵmpd"](512,Ul.b,Ul.b,[]),C["ɵmpd"](512,L.a,L.a,[]),C["ɵmpd"](512,Ll.a,Ll.a,[]),C["ɵmpd"](512,S.a,S.a,[]),C["ɵmpd"](512,G,G,[]),C["ɵmpd"](256,Sl.a,U,[])])})},865:function(l,n,e){"use strict";function t(l){return i["ɵvid"](0,[(l()(),i["ɵeld"](0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),i["ɵdid"](1,278528,null,0,u.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),i["ɵeld"](2,0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.backButtonClick(e)&&t}return t},a.b,a.a)),i["ɵdid"](3,278528,null,0,u.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵdid"](4,1097728,null,0,o.a,[[8,"bar-button"],r.a,i.ElementRef,i.Renderer],null,null),(l()(),i["ɵeld"](5,0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](6,278528,null,0,u.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵdid"](7,147456,null,0,d.a,[r.a,i.ElementRef,i.Renderer],{name:[0,"name"]},null),(l()(),i["ɵeld"](8,0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),i["ɵdid"](9,278528,null,0,u.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),i["ɵted"](10,null,["",""])),i["ɵncd"](null,0),i["ɵncd"](null,1),i["ɵncd"](null,2),(l()(),i["ɵeld"](14,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),i["ɵdid"](15,278528,null,0,u.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵncd"](null,3)],function(l,n){var e=n.component;l(n,1,0,"toolbar-background","toolbar-background-"+e._mode);l(n,3,0,"back-button","back-button-"+e._mode);l(n,6,0,"back-button-icon","back-button-icon-"+e._mode);l(n,7,0,e._bbIcon);l(n,9,0,"back-button-text","back-button-text-"+e._mode);l(n,15,0,"toolbar-content","toolbar-content-"+e._mode)},function(l,n){var e=n.component;l(n,2,0,e._hideBb);l(n,5,0,i["ɵnov"](n,7)._hidden);l(n,10,0,e._backText)})}e.d(n,"a",function(){return s}),n.b=t;var i=e(1),u=e(17),a=e(46),o=e(32),r=e(4),d=e(62),s=(e(8),e(37),i["ɵcrt"]({encapsulation:2,styles:[],data:{}}))},871:function(l,n,e){"use strict";e.d(n,"a",function(){return t});e(0),e(518),e(877),e(878),e(874);var t=function(){return function(){}}()},874:function(l,n,e){"use strict";e.d(n,"a",function(){return t});e(0);var t=function(){function l(l){this.logger=l}return n=l,l.prototype.transform=function(l){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var i="";if(!l||l<1e3)i=""+l;else if(l<1e4){i=Math.floor(l/1e3)+"k+"}else if(l<1e5){i=Math.floor(l/1e4)+"w+"}else i="10w+";return this.logger.debug(n.TAG+" format "+l+" to "+i),i},l.TAG="CommentCountFormatPipe",l;var n}()},877:function(l,n,e){"use strict";e.d(n,"a",function(){return i});e(0);var t=[{name:"审核不通过",value:0},{name:"审核通过",value:1},{name:"待审核",value:2}],i=function(){function l(l){this.logger=l}return n=l,l.prototype.transform=function(l){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var u=t.find(function(n){return n.value.toString()==l});return this.logger.debug(n.TAG+" find: "+JSON.stringify(u)),u?u.name:(this.logger.warn(n.TAG+" THIRD_USER_STATUS don't contains status("+l+")"),"")},l.TAG="ThirdUserStatusPipe",l;var n}()},878:function(l,n,e){"use strict";e.d(n,"a",function(){return i});e(0);var t=[{name:"待审核",value:0},{name:"通过",value:1},{name:"不通过",value:2}],i=function(){function l(l){this.logger=l}return n=l,l.prototype.transform=function(l){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var u=t.find(function(n){return null!=l&&n.value.toString()==l});return u?u.name:(this.logger.warn(n.TAG+" SHARE_STATUS don't contains status("+l+")"),"")},l.TAG="ShareStatusPipe",l;var n}()},893:function(l,n,e){"use strict";e.d(n,"a",function(){return t});e(0);var t=function(){return function(l){this.viewContainerRef=l}}()},907:function(l,n,e){"use strict";e.d(n,"a",function(){return t});e(0),e(893);var t=function(){return function(){}}()},935:function(l,n,e){"use strict";e.d(n,"a",function(){return u});e(0);var t=e(1),i=e(31),u=(e(947),function(){function l(l,n){this.fb=l,this.el=n,this.onBlur=new t.EventEmitter,this.dataChanged=new t.EventEmitter,this.onClose=new t.EventEmitter}return l.prototype.ngOnInit=function(){var l=[];this.data.required&&l.push(i.s.required),this.data.maxLength&&l.push(i.s.maxLength(this.data.maxLength)),this.data.pattern&&l.push(i.s.pattern(this.data.pattern)),this.valueCtrl=this.fb.control(this.data.value,l)},l.prototype.ngAfterViewInit=function(){this.focus()},l.prototype.blur=function(){this.valueCtrl.valid&&this.data.emitBlur&&this.onBlur.emit(this.valueCtrl.value)},l.prototype.onChanged=function(){var l;this.valueCtrl.valid&&(l=this.valueCtrl.value),this.dataChanged.emit(l)},l.prototype.focus=function(){this.data.focused&&this.el.nativeElement.querySelector("input").focus()},l}())},941:function(l,n,e){"use strict";e.d(n,"a",function(){return t});var t={live:{type:"live",code:1,name:"直播"},villageBroad:{type:"villageBroad",code:2,name:"乡村广播"},townBroad:{type:"townBroad",code:3,name:"乡镇广播"}}},943:function(l,n,e){"use strict";e.d(n,"a",function(){return u});e(0);var t=e(1),i=(e(26),e(20),e(194),e(27),e(61),e(88),e(42)),u=(e(196),function(){function l(l,n,e,i,u,a,o,r){this.utils=l,this.logger=n,this.pageTipProvider=e,this.aumsApi=i,this.aums=u,this.app=a,this.nativeJsExtend=o,this.adminUserProvider=r,this.onClickItem=new t.EventEmitter,this.onEdit=new t.EventEmitter,this.pageIndex=1,this.isInfiniting=!1}return n=l,l.prototype.ngOnChanges=function(l){var e=l.id,t=JSON.stringify(e.currentValue),i=JSON.stringify(e.previousValue);this.logger.debug(n.TAG+" ngOnChanges() currentValue: "+t),this.logger.debug(n.TAG+" ngOnChanges() previousValue: "+i),t!==i&&(this.logger.debug(n.TAG+" ngOnChanges() this.id: "+this.id),this.load())},l.prototype.load=function(l){var e=this;this.id&&(this.pageTipShow=this.pageTipProvider.loadingInstance().show,this.pageTipData=this.pageTipProvider.loadingInstance().data,this.infiniteScroller&&this.infiniteScroller.enable(!0),this.aums.getCommonList({columnId:this.id,curPage:1,areaId:this.adminUserProvider.user.areaId,userId:this.adminUserProvider.user.id,checkFlag:2},this.adminUserProvider.getApiEndPoint()).subscribe(function(t){Array.isArray(t)&&t.length?(e.pageTipShow=e.pageTipProvider.successInstance().show,e.pageTipData=e.pageTipProvider.successInstance().data,e.logger.debug(n.TAG+" load() get common list: "+JSON.stringify(t)),e.list=t,e.pageIndex++):(e.pageTipShow=e.pageTipProvider.emptyInstance().show,e.pageTipData=e.pageTipProvider.emptyInstance().data),l&&l("success")},function(n){var t=e.pageTipProvider.instanceFatory(n.status);e.pageTipShow=t.show,e.pageTipData=t.data,l&&l("error")}))},l.prototype.doInfinite=function(l){var n=this;this.isInfiniting||(this.isInfiniting=!0,this.aums.getCommonList({columnId:this.id,curPage:this.pageIndex,areaId:this.adminUserProvider.user.areaId,userId:this.adminUserProvider.user.id,checkFlag:2},this.adminUserProvider.getApiEndPoint()).subscribe(function(e){Array.isArray(e)&&e.length?(n.list=n.list.concat(e),n.pageIndex++):(l.enable(!1),n.loadListTip="没有更多了")},function(l){},function(){l.complete(),n.isInfiniting=!1}))},l.prototype.imgLoadError=function(l,e){this.logger.error(n.TAG+" 加载图片失败(imageUrl=>"+l.target.src+")"),setTimeout(function(){e.loadThumbnailError=!0},0)},l.prototype.openItem=function(l){this.onClickItem.emit(l.raw)},l.prototype.edit=function(l,n){l.stopPropagation(),this.onEdit.emit(n)},l.prototype.check=function(l,n){var e=this;l.stopPropagation();var t=1==n.raw.checkFlag?0:1;this.aumsApi.updateCheckFlag({articleIds:n.id,articleColumnId:n.raw.columnId,checkFlag:t},this.adminUserProvider.getApiEndPoint()).subscribe(function(l){1==l.isSuccess?n.raw.checkFlag=t:e.utils.toast("修改状态失败，请稍后再试")})},l.prototype.share=function(l,n){this.nativeJsExtend.startActivity(i.a.ACTIVITY_SHARE,this.app.apache.apiEndPoint+"/"+this.app.apache.path+"/#/article/"+n.id)},l.prototype.filterInfo=function(l){return/^[a-zA-Z]/.test(l)?"":l},l.prototype.trackById=function(l,n){return n.id},l.prototype.refreshPage=function(){this.pageIndex=1,this.load()},l.TAG="ManagerPostEditListPage ",l;var n}())},947:function(l,n,e){"use strict";e.d(n,"a",function(){return t});var t=function(){return function(l){this.value=l.value||"",this.required=!!l.required,this.maxLength=l.maxLength,this.label=l.label,this.pattern=l.pattern,this.patternErrorMessage=l.patternErrorMessage,this.emitBlur=null==l.emitBlur,this.focused=null==l.focused}}()},948:function(l,n,e){"use strict";e.d(n,"a",function(){return t});e(0),e(61),e(871);var t=function(){return function(){}}()},953:function(l,n,e){"use strict";e.d(n,"a",function(){return a});e(0),e(61),e(27),e(26);var t=e(95),i=(e(20),e(941)),u=(e(943),e(220)),a=(e(88),e(196),function(){function l(l,e,t,i,u,a,o,r,d){this.navCtrl=l,this.navParams=e,this.popoverCtrl=t,this.aumsApiProvider=i,this.aums=u,this.utils=a,this.logger=o,this.app=r,this.adminUserProvider=d,this.list=[],this.pageIndex=1,this.cId=+this.navParams.get("columnId"),this.name=this.navParams.get("columnName"),this.websiteId=+this.navParams.get("websiteId"),this.publishpower=+this.navParams.get("publishpower"),this.logger.info(n.TAG+" cId="+this.cId),this.logger.info(n.TAG+" name="+this.name)}return n=l,l.prototype.ionViewDidLoad=function(){},l.prototype.ionViewWillEnter=function(){this.app.managerPostItem&&this.logger.debug(n.TAG+" ionViewWillEnter() managerPostItem: "+JSON.stringify(this.app.managerPostItem)),"add"===this.app.getGlobalVar(n.TAG)&&(this.app.setGlobalVar(n.TAG,null),this.reload())},l.prototype.openCommonListItem=function(l){this.logger.info(n.TAG+" openCommonListItem() 点击文章列表项")},l.prototype.onEdit=function(l){this.app.managerPostItem=l;var n=void 0,e=void 0;2===l.raw.ftypeid&&1===l.raw.aorvtype?(n="publish-photos",e=t.b):2===l.raw.aorvtype?(n="publish-vote-subject",e=t.c):(n="publish",e=t.a),this.navCtrl.push(n,{columnName:this.name,type:e,columnId:this.cId,websiteId:this.websiteId,publishpower:this.publishpower,articleId:l.raw.articleId})},l.prototype.add=function(l){var e=this;switch(this.name){case"本村广播":case"乡镇广播":this.aumsApiProvider.getHostInfo({userId:this.adminUserProvider.user.id.toString()}).subscribe(function(l){l.success&&l.isPublishDevice&&l.checkFlag&&l.isCheck?e.navCtrl.push("publish-live",{type:"本村广播"===e.name?i.a.villageBroad.type:i.a.townBroad.type}):(e.logger.warn(n.TAG+" onPublish() get host info: "+JSON.stringify(l)),e.utils.toast("您没有权限发布乡村广播"))},function(l){e.logger.error(n.TAG+" onPublish() get host info error: "+l.message),e.utils.toast("您没有权限发布乡村广播")});break;default:this.presentArticleTypeSelect(l)}},l.prototype.reload=function(){this.managerPostEditListPage.refreshPage()},l.prototype.presentArticleTypeSelect=function(l){var e=this,i=this.popoverCtrl.create(u.a,{},{cssClass:"article-type-select"});i.present(),i.onDidDismiss(function(l){switch(e.app.setGlobalVar(n.TAG,"add"),l){case t.a:e.navCtrl.push("publish",{columnName:e.name,type:t.a,columnId:e.cId,websiteId:e.websiteId,publishpower:e.publishpower,articleId:0});break;case t.b:e.navCtrl.push("publish-photos",{columnName:e.name,type:t.b,columnId:e.cId,websiteId:e.websiteId,publishpower:e.publishpower,articleId:0});break;case t.c:e.navCtrl.push("publish-vote-subject",{columnName:e.name,type:t.c,columnId:e.cId,websiteId:e.websiteId,publishpower:e.publishpower,articleId:0})}})},l.TAG="ManagerPostListPage",l;var n}())},960:function(l,n,e){"use strict";function t(l){return o["ɵvid"](0,[(l()(),o["ɵeld"](0,0,null,null,4,"div",[["class","error"]],null,null,null,null,null)),(l()(),o["ɵted"](-1,null,["\n  "])),(l()(),o["ɵeld"](2,0,null,null,1,"ion-icon",[["class","iconfont icon-warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o["ɵdid"](3,147456,null,0,r.a,[d.a,o.ElementRef,o.Renderer],null,null),(l()(),o["ɵted"](4,null,["\n  ","不能超过","字数\n"]))],null,function(l,n){var e=n.component;l(n,2,0,o["ɵnov"](n,3)._hidden);l(n,4,0,e.data.label,e.data.maxLength)})}function i(l){return o["ɵvid"](0,[(l()(),o["ɵeld"](0,0,null,null,4,"div",[["class","error"]],null,null,null,null,null)),(l()(),o["ɵted"](-1,null,["\n  "])),(l()(),o["ɵeld"](2,0,null,null,1,"ion-icon",[["class","iconfont icon-warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o["ɵdid"](3,147456,null,0,r.a,[d.a,o.ElementRef,o.Renderer],null,null),(l()(),o["ɵted"](4,null,["\n  ","\n"]))],null,function(l,n){var e=n.component;l(n,2,0,o["ɵnov"](n,3)._hidden);l(n,4,0,e.data.patternErrorMessage)})}function u(l){return o["ɵvid"](0,[(l()(),o["ɵeld"](0,0,null,null,4,"div",[["class","error"]],null,null,null,null,null)),(l()(),o["ɵted"](-1,null,["\n  "])),(l()(),o["ɵeld"](2,0,null,null,1,"ion-icon",[["class","iconfont icon-warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o["ɵdid"](3,147456,null,0,r.a,[d.a,o.ElementRef,o.Renderer],null,null),(l()(),o["ɵted"](4,null,["\n  ","不能为空\n"]))],null,function(l,n){var e=n.component;l(n,2,0,o["ɵnov"](n,3)._hidden);l(n,4,0,e.data.label)})}function a(l){return o["ɵvid"](0,[(l()(),o["ɵeld"](0,0,null,null,5,"input",[["type","text"]],[[8,"placeholder",0],[2,"error",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"blur"],[null,"change"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var t=!0,i=l.component;if("input"===n){t=!1!==o["ɵnov"](l,1)._handleInput(e.target.value)&&t}if("blur"===n){t=!1!==o["ɵnov"](l,1).onTouched()&&t}if("compositionstart"===n){t=!1!==o["ɵnov"](l,1)._compositionStart()&&t}if("compositionend"===n){t=!1!==o["ɵnov"](l,1)._compositionEnd(e.target.value)&&t}if("blur"===n){t=!1!==i.blur()&&t}if("change"===n){t=!1!==i.onChanged()&&t}return t},null,null)),o["ɵdid"](1,16384,null,0,s.c,[o.Renderer2,o.ElementRef,[2,s.a]],null,null),o["ɵprd"](1024,null,s.l,function(l){return[l]},[s.c]),o["ɵdid"](3,540672,null,0,s.f,[[8,null],[8,null],[2,s.l]],{form:[0,"form"]},null),o["ɵprd"](2048,null,s.m,null,[s.f]),o["ɵdid"](5,16384,null,0,s.n,[s.m],null,null),(l()(),o["ɵted"](-1,null,["\n"])),(l()(),o["ɵand"](16777216,null,null,1,null,t)),o["ɵdid"](8,16384,null,0,c.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),o["ɵted"](-1,null,["\n"])),(l()(),o["ɵand"](16777216,null,null,1,null,i)),o["ɵdid"](11,16384,null,0,c.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),o["ɵted"](-1,null,["\n"])),(l()(),o["ɵand"](16777216,null,null,1,null,u)),o["ɵdid"](14,16384,null,0,c.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),o["ɵted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,3,0,e.valueCtrl);l(n,8,0,(null==e.valueCtrl.errors?null:e.valueCtrl.errors.maxlength)&&(e.valueCtrl.touched||e.valueCtrl.dirty));l(n,11,0,(null==e.valueCtrl.errors?null:e.valueCtrl.errors.pattern)&&(e.valueCtrl.touched||e.valueCtrl.dirty));l(n,14,0,(null==e.valueCtrl.errors?null:e.valueCtrl.errors.required)&&(e.valueCtrl.touched||e.valueCtrl.dirty))},function(l,n){var e=n.component;l(n,0,0,"请输入"+e.data.label,e.valueCtrl.invalid&&(e.valueCtrl.touched||e.valueCtrl.dirty),o["ɵnov"](n,5).ngClassUntouched,o["ɵnov"](n,5).ngClassTouched,o["ɵnov"](n,5).ngClassPristine,o["ɵnov"](n,5).ngClassDirty,o["ɵnov"](n,5).ngClassValid,o["ɵnov"](n,5).ngClassInvalid,o["ɵnov"](n,5).ngClassPending)})}e.d(n,"a",function(){return f});var o=e(1),r=e(62),d=e(4),s=e(31),c=e(17),p=e(935),m=o["ɵcrt"]({encapsulation:2,styles:[],data:{}}),f=o["ɵccf"]("app-input",p.a,function(l){return o["ɵvid"](0,[(l()(),o["ɵeld"](0,0,null,null,1,"app-input",[],null,null,null,a,m)),o["ɵdid"](1,4308992,null,0,p.a,[s.d,o.ElementRef],null,null)],function(l,n){l(n,1,0)},null)},{data:"data"},{onBlur:"onBlur",dataChanged:"dataChanged",onClose:"onClose"},[])},972:function(l,n,e){"use strict";function t(l){return i["ɵvid"](0,[(l()(),i["ɵeld"](0,0,null,null,1,"div",[["class","toggle-icon"]],null,null,null,null,null)),(l()(),i["ɵeld"](1,0,null,null,0,"div",[["class","toggle-inner"]],null,null,null,null,null)),(l()(),i["ɵeld"](2,0,null,null,1,"button",[["class","item-cover"],["disable-activated",""],["ion-button","item-cover"],["role","checkbox"],["type","button"]],[[8,"id",0],[1,"aria-checked",0],[1,"aria-labelledby",0],[1,"aria-disabled",0]],null,null,u.b,u.a)),i["ɵdid"](3,1097728,null,0,a.a,[[8,"item-cover"],o.a,i.ElementRef,i.Renderer],null,null)],null,function(l,n){var e=n.component;l(n,2,0,e.id,e._value,e._labelId,e._disabled)})}e.d(n,"a",function(){return r}),n.b=t;var i=e(1),u=e(46),a=e(32),o=e(4),r=(e(33),e(7),e(48),e(11),e(14),i["ɵcrt"]({encapsulation:2,styles:[],data:{}}))},973:function(l,n,e){"use strict";function t(l){return a["ɵvid"](0,[(l()(),a["ɵeld"](0,0,null,null,1,"div",[["class","datetime-text datetime-placeholder"]],null,null,null,null,null)),(l()(),a["ɵted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.placeholder)})}function i(l){return a["ɵvid"](0,[(l()(),a["ɵeld"](0,0,null,null,1,"div",[["class","datetime-text"]],null,null,null,null,null)),(l()(),a["ɵted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.component._text)})}function u(l){return a["ɵvid"](0,[(l()(),a["ɵand"](16777216,null,null,1,null,t)),a["ɵdid"](1,16384,null,0,o.NgIf,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),a["ɵand"](16777216,null,null,1,null,i)),a["ɵdid"](3,16384,null,0,o.NgIf,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),a["ɵeld"](4,0,null,null,1,"button",[["aria-haspopup","true"],["class","item-cover"],["ion-button","item-cover"],["type","button"]],[[8,"id",0],[1,"aria-labelledby",0],[1,"aria-disabled",0]],null,null,r.b,r.a)),a["ɵdid"](5,1097728,null,0,d.a,[[8,"item-cover"],s.a,a.ElementRef,a.Renderer],null,null)],function(l,n){var e=n.component;l(n,1,0,!e._text);l(n,3,0,e._text)},function(l,n){var e=n.component;l(n,4,0,e.id,e._labelId,e._disabled)})}e.d(n,"a",function(){return c}),n.b=u;var a=e(1),o=e(17),r=e(46),d=e(32),s=e(4),c=(e(33),a["ɵcrt"]({encapsulation:2,styles:[],data:{}}))}});