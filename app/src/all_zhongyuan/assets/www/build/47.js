webpackJsonp([47],{815:function(e,l,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"ion-icon",[["item-end",""],["name","ios-arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](1,147456,[[3,4]],0,L.a,[A.a,i.ElementRef,i.Renderer],{name:[0,"name"]},null)],function(e,l){e(l,1,0,"ios-arrow-forward")},function(e,l){e(l,0,0,i["ɵnov"](l,1)._hidden)})}function t(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,13,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(e,l,n){var a=!0;if("click"===l){a=!1!==e.component.openChildren(e.context.$implicit)&&a}return a},I.b,I.a)),i["ɵdid"](1,1097728,null,3,y.a,[_.a,A.a,i.ElementRef,i.Renderer,[2,N.a]],null,null),i["ɵqud"](335544320,1,{contentLabel:0}),i["ɵqud"](603979776,2,{_buttons:1}),i["ɵqud"](603979776,3,{_icons:1}),i["ɵdid"](5,16384,null,0,P.a,[],null,null),(e()(),i["ɵted"](6,2,["\n      ","\n      "])),(e()(),i["ɵeld"](7,0,null,4,2,"button",[["class","select-area"],["color","liveAction"],["ion-button",""],["item-end",""],["outline",""],["small",""]],null,[[null,"click"]],function(e,l,n){var a=!0;if("click"===l){a=!1!==e.component.onAreaSelect(n,e.context.$implicit)&&a}return a},w.b,w.a)),i["ɵdid"](8,1097728,[[2,4]],0,V.a,[[8,""],A.a,i.ElementRef,i.Renderer],{color:[0,"color"],small:[1,"small"],outline:[2,"outline"]},null),(e()(),i["ɵted"](-1,0,["选择\n      "])),(e()(),i["ɵted"](-1,2,["\n      "])),(e()(),i["ɵand"](16777216,null,4,1,null,a)),i["ɵdid"](12,16384,null,0,E.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["ɵted"](-1,2,["\n    "]))],function(e,l){var n=l.component;e(l,8,0,"liveAction","","");e(l,12,0,n.findNext())},function(e,l){e(l,6,0,l.context.$implicit.areaName)})}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,10,"ion-header",[],null,null,null,null,null)),i["ɵdid"](1,16384,null,0,D.a,[A.a,i.ElementRef,i.Renderer,[2,S.a]],null,null),(e()(),i["ɵted"](-1,null,["\n  "])),(e()(),i["ɵeld"](3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,x.b,x.a)),i["ɵdid"](4,49152,null,0,F.a,[B.a,[2,S.a],[2,K.a],A.a,i.ElementRef,i.Renderer],null,null),(e()(),i["ɵted"](-1,3,["\n    "])),(e()(),i["ɵeld"](6,0,null,3,2,"ion-title",[],null,null,null,M.b,M.a)),i["ɵdid"](7,49152,null,0,O.a,[A.a,i.ElementRef,i.Renderer,[2,U.a],[2,F.a]],null,null),(e()(),i["ɵted"](8,0,["",""])),(e()(),i["ɵted"](-1,3,["\n  "])),(e()(),i["ɵted"](-1,null,["\n\n"])),(e()(),i["ɵted"](-1,null,["\n\n"])),(e()(),i["ɵeld"](12,0,null,null,9,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null],[2,"has-infinite-scroll",null]],null,null,j.b,j.a)),i["ɵdid"](13,4374528,null,0,q.a,[A.a,$.a,z.a,i.ElementRef,i.Renderer,B.a,G.a,i.NgZone,[2,S.a],[2,K.a]],null,null),(e()(),i["ɵted"](-1,1,["\n  "])),(e()(),i["ɵeld"](15,0,null,1,5,"ion-list",[],null,null,null,null,null)),i["ɵdid"](16,16384,null,0,W.a,[A.a,i.ElementRef,i.Renderer,$.a,J.l,z.a],null,null),(e()(),i["ɵted"](-1,null,["\n    "])),(e()(),i["ɵand"](16777216,null,null,1,null,t)),i["ɵdid"](19,802816,null,0,E.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),i["ɵted"](-1,null,["\n  "])),(e()(),i["ɵted"](-1,1,["\n"])),(e()(),i["ɵted"](-1,null,["\n"]))],function(e,l){e(l,19,0,l.component.areaList)},function(e,l){var n=l.component;e(l,3,0,i["ɵnov"](l,4)._hidden,i["ɵnov"](l,4)._sbPadding);e(l,8,0,n.title);e(l,12,0,i["ɵnov"](l,13).statusbarPadding,i["ɵnov"](l,13)._hasRefresher,i["ɵnov"](l,13)._hasInfiniteScroll)})}Object.defineProperty(l,"__esModule",{value:!0});var i=n(1),o=(n(0),n(61),n(205)),u=n(26),s=n(20),d=n(27),c=n(196),p=function(){function e(e,l,n,a,t,r,i,o){this.navCtrl=e,this.navParams=l,this.app=n,this.aums=a,this.alertCtrl=t,this.utils=r,this.areaTreeProvider=i,this.adminUserProvider=o,this.TAG="AreaTreeSharePage",this.title="",this.upLevel=+this.navParams.get("upLevel"),this.level=+this.navParams.get("level"),this.action=this.navParams.get("action"),this.title="选择分享区域",this.utils.log("info",this.TAG,"constructor","向上可分享区域upLevel = "+this.upLevel)}return e.prototype.ionViewDidLoad=function(){this.load()},e.prototype.ionViewWillEnter=function(){},e.prototype.ionViewWillUnload=function(){this.areaTreeProvider.areaTreeViewControllers.pop()},e.prototype.prepareAreaList=function(e){var l;if(e.upperRegion&&e.upperRegion.length)for(var n=0;n<e.upperRegion.length;n++)0==n?this.app.liveShareAreaTree=[e.upperRegion[n]]:l&&(l.children=[e.upperRegion[n]]),l=e.upperRegion[n];e.areaId&&e.areaName&&e.areaLevel&&(l?l.children=[{areaName:e.areaName,areaId:e.areaId,areaLevel:e.areaLevel,children:e.lowerRegion||[]}]:this.app.liveShareAreaTree=[{areaName:e.areaName,areaId:e.areaId,areaLevel:e.areaLevel,children:e.lowerRegion||[]}]),this.areaList=this.app.liveShareAreaTree,this.areaList.length&&(this.level=this.areaList[0].areaLevel)},e.prototype.load=function(){var e=this;"init"===this.action?(this.areaTreeProvider.areaTreeViewControllers=[],this.areaTreeProvider.areaTreeViewControllers.push(this.navCtrl.getActive()),this.aums.getAreaInfoById({regionId:this.adminUserProvider.user.areaId,upperLevel:this.upLevel,lowerLevel:7,needDetailInfo:!0}).subscribe(function(l){e.app.liveShareAreaTree=null,1==l.status&&e.prepareAreaList(l)})):"share_short_video"===this.action||"share_short_video_stb"===this.action?(this.areaTreeProvider.areaTreeViewControllers=[],this.areaTreeProvider.areaTreeViewControllers.push(this.navCtrl.getActive()),this.aums.getShareShortVideoAreaTree({userId:this.adminUserProvider.user.id,userType:0}).subscribe(function(l){1==l.success&&e.prepareAreaList(l)})):(this.areaTreeProvider.areaTreeViewControllers.push(this.navCtrl.getActive()),this.areaList=this.app.findChilrenAreaTreeByLevel(this.app.liveShareAreaTree,this.level))},e.prototype.findNext=function(){var e=this.app.findChilrenAreaTreeByLevel(this.app.liveShareAreaTree,this.level+1);return e&&e.length},e.prototype.openChildren=function(e){this.findNext()&&this.navCtrl.push("area-tree-share",{upLevel:0,action:"child",level:e.areaLevel})},e.prototype.onAreaSelect=function(e,l){var n=this;e.stopPropagation(),this.app.closeAlert(),this.app.alterInstance=this.alertCtrl.create({title:"提示",message:"是否分享到"+l.areaName+"?",buttons:[{text:"确定",handler:function(){n.areaTreeProvider.selectedArea=l,n.areaTreeProvider.areaTreeViewControllers.forEach(function(e){n.navCtrl.removeView(e)})}},{text:"取消",handler:function(){}}]}),this.app.alterInstance.present()},e}(),h=function(){return function(){}}(),f=n(504),v=n(505),m=n(506),b=n(507),g=n(508),R=n(509),C=n(510),k=n(511),T=n(512),L=n(62),A=n(4),I=n(513),y=n(36),_=n(33),N=n(67),P=n(127),w=n(46),V=n(32),E=n(17),D=n(128),S=n(8),x=n(865),F=n(55),B=n(15),K=n(37),M=n(515),O=n(91),U=n(57),j=n(514),q=n(38),$=n(7),z=n(14),G=n(47),W=n(89),J=n(11),Z=n(18),H=n(135),Q=i["ɵcrt"]({encapsulation:2,styles:[],data:{}}),X=i["ɵccf"]("page-area-tree-share",p,function(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,0,null,null,1,"page-area-tree-share",[],null,null,null,r,Q)),i["ɵdid"](1,49152,null,0,p,[K.a,Z.a,s.a,d.a,H.a,u.a,o.a,c.a],null,null)],null,null)},{},{},[]),Y=n(31),ee=n(195),le=n(63);n.d(l,"AreaTreeSharePageModuleNgFactory",function(){return ne});var ne=i["ɵcmf"](h,[],function(e){return i["ɵmod"]([i["ɵmpd"](512,i.ComponentFactoryResolver,i["ɵCodegenComponentFactoryResolver"],[[8,[f.a,v.a,m.a,b.a,g.a,R.a,C.a,k.a,T.a,X]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["ɵmpd"](4608,E.NgLocalization,E.NgLocaleLocalization,[i.LOCALE_ID,[2,E["ɵa"]]]),i["ɵmpd"](4608,Y.v,Y.v,[]),i["ɵmpd"](4608,Y.d,Y.d,[]),i["ɵmpd"](512,E.CommonModule,E.CommonModule,[]),i["ɵmpd"](512,Y.t,Y.t,[]),i["ɵmpd"](512,Y.j,Y.j,[]),i["ɵmpd"](512,Y.r,Y.r,[]),i["ɵmpd"](512,ee.a,ee.a,[]),i["ɵmpd"](512,ee.b,ee.b,[]),i["ɵmpd"](512,h,h,[]),i["ɵmpd"](256,le.a,p,[])])})},865:function(e,l,n){"use strict";function a(e){return t["ɵvid"](0,[(e()(),t["ɵeld"](0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),t["ɵdid"](1,278528,null,0,r.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),t["ɵeld"](2,0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(e,l,n){var a=!0;if("click"===l){a=!1!==e.component.backButtonClick(n)&&a}return a},i.b,i.a)),t["ɵdid"](3,278528,null,0,r.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["ɵdid"](4,1097728,null,0,o.a,[[8,"bar-button"],u.a,t.ElementRef,t.Renderer],null,null),(e()(),t["ɵeld"](5,0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t["ɵdid"](6,278528,null,0,r.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["ɵdid"](7,147456,null,0,s.a,[u.a,t.ElementRef,t.Renderer],{name:[0,"name"]},null),(e()(),t["ɵeld"](8,0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),t["ɵdid"](9,278528,null,0,r.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),t["ɵted"](10,null,["",""])),t["ɵncd"](null,0),t["ɵncd"](null,1),t["ɵncd"](null,2),(e()(),t["ɵeld"](14,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),t["ɵdid"](15,278528,null,0,r.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["ɵncd"](null,3)],function(e,l){var n=l.component;e(l,1,0,"toolbar-background","toolbar-background-"+n._mode);e(l,3,0,"back-button","back-button-"+n._mode);e(l,6,0,"back-button-icon","back-button-icon-"+n._mode);e(l,7,0,n._bbIcon);e(l,9,0,"back-button-text","back-button-text-"+n._mode);e(l,15,0,"toolbar-content","toolbar-content-"+n._mode)},function(e,l){var n=l.component;e(l,2,0,n._hideBb);e(l,5,0,t["ɵnov"](l,7)._hidden);e(l,10,0,n._backText)})}n.d(l,"a",function(){return d}),l.b=a;var t=n(1),r=n(17),i=n(46),o=n(32),u=n(4),s=n(62),d=(n(8),n(37),t["ɵcrt"]({encapsulation:2,styles:[],data:{}}))}});